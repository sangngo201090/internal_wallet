  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-24 07:22:00.538834', '2023-11-24 07:22:00.538837') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for ::1 at 2023-11-24 14:22:42 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /usr/local/lib/ruby/gems/3.2.0/gems/railties-7.1.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /usr/local/lib/ruby/gems/3.2.0/gems/railties-7.1.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.9ms | Allocations: 375)
Completed 200 OK in 38ms (Views: 11.1ms | ActiveRecord: 0.0ms | Allocations: 7876)


  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateWallets (20231124081852)
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateWallets (20231124081852)
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateWallets (20231124081852)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "wallets" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231124081852') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateEntities (20231124084502)
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateEntities (20231124084502)
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateEntities (20231124084502)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "entities" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "wallet_id" integer, "type" varchar, "name" varchar, "gender" integer(3), "description" varchar, "username" varchar, "password" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_dc69d209e7"
FOREIGN KEY ("wallet_id")
  REFERENCES "wallets" ("id")
)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_entities_on_wallet_id" ON "entities" ("wallet_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231124084502') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransactions (20231124090120)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "source_wallet_id" integer, "target_wallet_id" integer, "amount" decimal(10,2), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c43e57190f"
FOREIGN KEY ("source_wallet_id")
  REFERENCES "wallets" ("id")
, CONSTRAINT "fk_rails_0226e8eeea"
FOREIGN KEY ("target_wallet_id")
  REFERENCES "wallets" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_source_wallet_id" ON "transactions" ("source_wallet_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_target_wallet_id" ON "transactions" ("target_wallet_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231124090120') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-25 08:51:30.994507', '2023-11-25 08:51:30.994510') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateWallets (20231124081852)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "wallets" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231124081852') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateEntities (20231124084502)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "entities" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "wallet_id" integer, "type" varchar, "name" varchar, "gender" integer(3), "description" varchar, "username" varchar, "password" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_dc69d209e7"
FOREIGN KEY ("wallet_id")
  REFERENCES "wallets" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_entities_on_wallet_id" ON "entities" ("wallet_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231124084502') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransactions (20231124090120)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "source_wallet_id" integer, "target_wallet_id" integer, "amount" decimal(10,2), "description" varchar, "message" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c43e57190f"
FOREIGN KEY ("source_wallet_id")
  REFERENCES "wallets" ("id")
, CONSTRAINT "fk_rails_0226e8eeea"
FOREIGN KEY ("target_wallet_id")
  REFERENCES "wallets" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_source_wallet_id" ON "transactions" ("source_wallet_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_target_wallet_id" ON "transactions" ("target_wallet_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231124090120') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-25 10:31:50.278306', '2023-11-25 10:31:50.278309') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateWallets (20231124081852)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "wallets" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231124081852') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateEntities (20231124084502)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "entities" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "wallet_id" integer, "type" varchar, "name" varchar, "gender" integer(3), "description" varchar, "symbol" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_dc69d209e7"
FOREIGN KEY ("wallet_id")
  REFERENCES "wallets" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_entities_on_wallet_id" ON "entities" ("wallet_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231124084502') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransactions (20231124090120)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "source_wallet_id" integer, "target_wallet_id" integer, "amount" decimal(10,2), "description" varchar, "message" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c43e57190f"
FOREIGN KEY ("source_wallet_id")
  REFERENCES "wallets" ("id")
, CONSTRAINT "fk_rails_0226e8eeea"
FOREIGN KEY ("target_wallet_id")
  REFERENCES "wallets" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_source_wallet_id" ON "transactions" ("source_wallet_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_target_wallet_id" ON "transactions" ("target_wallet_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231124090120') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateSytemUsers (20231125094830)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "sytem_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_name" varchar, "password" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231125094830') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-25 10:33:58.172785', '2023-11-25 10:33:58.172788') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateWallets (20231124081852)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "wallets" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231124081852') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateEntities (20231124084502)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "entities" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "wallet_id" integer, "system_user_id" integer, "type" varchar, "name" varchar, "gender" integer(3), "description" varchar, "symbol" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_dc69d209e7"
FOREIGN KEY ("wallet_id")
  REFERENCES "wallets" ("id")
, CONSTRAINT "fk_rails_f8c94d2c31"
FOREIGN KEY ("system_user_id")
  REFERENCES "system_users" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_entities_on_wallet_id" ON "entities" ("wallet_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_entities_on_system_user_id" ON "entities" ("system_user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231124084502') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransactions (20231124090120)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "source_wallet_id" integer, "target_wallet_id" integer, "amount" decimal(10,2), "description" varchar, "message" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c43e57190f"
FOREIGN KEY ("source_wallet_id")
  REFERENCES "wallets" ("id")
, CONSTRAINT "fk_rails_0226e8eeea"
FOREIGN KEY ("target_wallet_id")
  REFERENCES "wallets" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_source_wallet_id" ON "transactions" ("source_wallet_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_target_wallet_id" ON "transactions" ("target_wallet_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231124090120') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateSytemUsers (20231125094830)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (31.8ms)[0m  [1m[35mCREATE TABLE "sytem_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_name" varchar, "password" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231125094830') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-25 14:58:07.583133', '2023-11-25 14:58:07.583136') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateWallets (20231124081852)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "wallets" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231124081852') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateEntities (20231124084502)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "entities" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "wallet_id" integer, "system_user_id" integer, "type" varchar, "name" varchar, "birth_date" date, "description" varchar, "symbol" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_dc69d209e7"
FOREIGN KEY ("wallet_id")
  REFERENCES "wallets" ("id")
, CONSTRAINT "fk_rails_f8c94d2c31"
FOREIGN KEY ("system_user_id")
  REFERENCES "system_users" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_entities_on_wallet_id" ON "entities" ("wallet_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_entities_on_system_user_id" ON "entities" ("system_user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231124084502') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransactions (20231124090120)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "source_wallet_id" integer, "target_wallet_id" integer, "amount" decimal(10,2), "description" varchar, "message" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c43e57190f"
FOREIGN KEY ("source_wallet_id")
  REFERENCES "wallets" ("id")
, CONSTRAINT "fk_rails_0226e8eeea"
FOREIGN KEY ("target_wallet_id")
  REFERENCES "wallets" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_source_wallet_id" ON "transactions" ("source_wallet_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_target_wallet_id" ON "transactions" ("target_wallet_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231124090120') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateSytemUsers (20231125094830)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (34.4ms)[0m  [1m[35mCREATE TABLE "sytem_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_name" varchar, "password" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231125094830') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for ::1 at 2023-11-25 22:21:48 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /usr/local/lib/ruby/gems/3.2.0/gems/railties-7.1.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /usr/local/lib/ruby/gems/3.2.0/gems/railties-7.1.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.6ms | Allocations: 375)
Completed 200 OK in 14ms (Views: 4.3ms | ActiveRecord: 0.0ms | Allocations: 4269)


Started POST "/api/users" for 127.0.0.1 at 2023-11-25 22:23:00 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Mr Sang", "birth_date"=>"1990-01-01"}}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 536)


  
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
actionpack (7.1.2) lib/action_controller/metal/request_forgery_protection.rb:293:in `handle_unverified_request'
actionpack (7.1.2) lib/action_controller/metal/request_forgery_protection.rb:388:in `handle_unverified_request'
actionpack (7.1.2) lib/action_controller/metal/request_forgery_protection.rb:377:in `verify_authenticity_token'
activesupport (7.1.2) lib/active_support/callbacks.rb:403:in `block in make_lambda'
activesupport (7.1.2) lib/active_support/callbacks.rb:202:in `block (2 levels) in halting'
actionpack (7.1.2) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (7.1.2) lib/active_support/callbacks.rb:203:in `block in halting'
activesupport (7.1.2) lib/active_support/callbacks.rb:598:in `block in invoke_before'
activesupport (7.1.2) lib/active_support/callbacks.rb:598:in `each'
activesupport (7.1.2) lib/active_support/callbacks.rb:598:in `invoke_before'
activesupport (7.1.2) lib/active_support/callbacks.rb:119:in `block in run_callbacks'
activesupport (7.1.2) lib/active_support/callbacks.rb:141:in `run_callbacks'
actionpack (7.1.2) lib/abstract_controller/callbacks.rb:258:in `process_action'
actionpack (7.1.2) lib/action_controller/metal/rescue.rb:25:in `process_action'
actionpack (7.1.2) lib/action_controller/metal/instrumentation.rb:74:in `block in process_action'
activesupport (7.1.2) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.1.2) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (7.1.2) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.1.2) lib/action_controller/metal/instrumentation.rb:73:in `process_action'
actionpack (7.1.2) lib/action_controller/metal/params_wrapper.rb:261:in `process_action'
activerecord (7.1.2) lib/active_record/railties/controller_runtime.rb:32:in `process_action'
actionpack (7.1.2) lib/abstract_controller/base.rb:160:in `process'
actionview (7.1.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
rack (3.0.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.8) lib/rack/etag.rb:29:in `call'
rack (3.0.8) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.8) lib/rack/head.rb:15:in `call'
actionpack (7.1.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (7.1.2) lib/active_record/migration.rb:654:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started POST "/api/users?birth_date=1990-01-01" for ::1 at 2023-11-25 22:30:29 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"birth_date"=>"1990-01-01"}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 433)


  
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
actionpack (7.1.2) lib/action_controller/metal/request_forgery_protection.rb:293:in `handle_unverified_request'
actionpack (7.1.2) lib/action_controller/metal/request_forgery_protection.rb:388:in `handle_unverified_request'
actionpack (7.1.2) lib/action_controller/metal/request_forgery_protection.rb:377:in `verify_authenticity_token'
activesupport (7.1.2) lib/active_support/callbacks.rb:403:in `block in make_lambda'
activesupport (7.1.2) lib/active_support/callbacks.rb:202:in `block (2 levels) in halting'
actionpack (7.1.2) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (7.1.2) lib/active_support/callbacks.rb:203:in `block in halting'
activesupport (7.1.2) lib/active_support/callbacks.rb:598:in `block in invoke_before'
activesupport (7.1.2) lib/active_support/callbacks.rb:598:in `each'
activesupport (7.1.2) lib/active_support/callbacks.rb:598:in `invoke_before'
activesupport (7.1.2) lib/active_support/callbacks.rb:119:in `block in run_callbacks'
activesupport (7.1.2) lib/active_support/callbacks.rb:141:in `run_callbacks'
actionpack (7.1.2) lib/abstract_controller/callbacks.rb:258:in `process_action'
actionpack (7.1.2) lib/action_controller/metal/rescue.rb:25:in `process_action'
actionpack (7.1.2) lib/action_controller/metal/instrumentation.rb:74:in `block in process_action'
activesupport (7.1.2) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.1.2) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (7.1.2) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.1.2) lib/action_controller/metal/instrumentation.rb:73:in `process_action'
actionpack (7.1.2) lib/action_controller/metal/params_wrapper.rb:261:in `process_action'
activerecord (7.1.2) lib/active_record/railties/controller_runtime.rb:32:in `process_action'
actionpack (7.1.2) lib/abstract_controller/base.rb:160:in `process'
actionview (7.1.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
rack (3.0.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.8) lib/rack/etag.rb:29:in `call'
rack (3.0.8) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.8) lib/rack/head.rb:15:in `call'
actionpack (7.1.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (7.1.2) lib/active_record/migration.rb:654:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started POST "/api/users?birth_date=1990-01-01" for ::1 at 2023-11-25 22:36:47 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"birth_date"=>"1990-01-01"}
Completed 400 Bad Request in 5ms (ActiveRecord: 0.0ms | Allocations: 2211)


  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/api/users_controller.rb:22:in `user_params'
app/controllers/api/users_controller.rb:6:in `create'
Started POST "/api/users?name=Mr%20Sang&birth_date=1990-01-01" for ::1 at 2023-11-25 22:38:18 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"name"=>"Mr Sang", "birth_date"=>"1990-01-01"}
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 469)


  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/api/users_controller.rb:22:in `user_params'
app/controllers/api/users_controller.rb:6:in `create'
Started POST "/api/users?{=&%22user%22=%20{&%22name%22=%20%22John%20Doe%22,&%22email%22=%20%22john@example.com%22,&%22birth_date%22=%20%221990-01-01%22,&%22gender%22=%20%22Male%22&}=&}=" for ::1 at 2023-11-25 22:40:06 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"{"=>"", "\"user\""=>" {", "\"name\""=>" \"John Doe\",", "\"email\""=>" \"john@example.com\",", "\"birth_date\""=>" \"1990-01-01\",", "\"gender\""=>" \"Male\"", "}"=>""}
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 471)


  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/api/users_controller.rb:22:in `user_params'
app/controllers/api/users_controller.rb:6:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 22:40:16 +0700
Processing by Api::UsersController#create as */*
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 469)


  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/api/users_controller.rb:22:in `user_params'
app/controllers/api/users_controller.rb:6:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 22:42:20 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"John Doe", "email"=>"john@example.com", "birth_date"=>"1990-01-01", "gender"=>"Male"}}
[31mUnpermitted parameters: :email, :gender. Context: { controller: Api::UsersController, action: create, request: #<ActionDispatch::Request:0x000000010562b370>, params: {"user"=>{"name"=>"John Doe", "email"=>"john@example.com", "birth_date"=>"1990-01-01", "gender"=>"Male"}, "controller"=>"api/users", "action"=>"create"} }[0m
Completed 500 Internal Server Error in 61ms (ActiveRecord: 2.7ms | Allocations: 24020)


  
NameError (undefined local variable or method `code' for main:Object):
  
app/models/wallet.rb:1:in `<main>'
app/controllers/api/users_controller.rb:7:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 22:43:06 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"John Doe", "email"=>"john@example.com", "birth_date"=>"1990-01-01", "gender"=>"Male"}}
[31mUnpermitted parameters: :email, :gender. Context: { controller: Api::UsersController, action: create, request: #<ActionDispatch::Request:0x0000000106a230d0>, params: {"user"=>{"name"=>"John Doe", "email"=>"john@example.com", "birth_date"=>"1990-01-01", "gender"=>"Male"}, "controller"=>"api/users", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:9:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/users_controller.rb:9:in `create'
Completed 422 Unprocessable Entity in 36ms (Views: 0.2ms | ActiveRecord: 3.3ms | Allocations: 18101)


Started POST "/api/users" for ::1 at 2023-11-25 22:46:09 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"John Doe", "email"=>"john@example.com", "birth_date"=>"1990-01-01", "gender"=>"Male"}}
[31mUnpermitted parameters: :email, :gender. Context: { controller: Api::UsersController, action: create, request: #<ActionDispatch::Request:0x0000000106a22310>, params: {"user"=>{"name"=>"John Doe", "email"=>"john@example.com", "birth_date"=>"1990-01-01", "gender"=>"Male"}, "controller"=>"api/users", "action"=>"create"} }[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 593)


  
SystemExit (exit):
  
app/controllers/api/users_controller.rb:7:in `abort'
app/controllers/api/users_controller.rb:7:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 22:46:25 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"John Doe", "email"=>"john@example.com", "birth_date"=>"1990-01-01", "gender"=>"Male"}}
[31mUnpermitted parameters: :email, :gender. Context: { controller: Api::UsersController, action: create, request: #<ActionDispatch::Request:0x0000000106a68540>, params: {"user"=>{"name"=>"John Doe", "email"=>"john@example.com", "birth_date"=>"1990-01-01", "gender"=>"Male"}, "controller"=>"api/users", "action"=>"create"} }[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 583)


  
SystemExit (exit):
  
app/controllers/api/users_controller.rb:7:in `exit'
app/controllers/api/users_controller.rb:7:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 22:48:07 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"John Doe", "email"=>"john@example.com", "birth_date"=>"1990-01-01", "gender"=>"Male"}}
[31mUnpermitted parameters: :email, :gender. Context: { controller: Api::UsersController, action: create, request: #<ActionDispatch::Request:0x000000010710f8d0>, params: {"user"=>{"name"=>"John Doe", "email"=>"john@example.com", "birth_date"=>"1990-01-01", "gender"=>"Male"}, "controller"=>"api/users", "action"=>"create"} }[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 582)


  
SystemExit (exit):
  
app/controllers/api/users_controller.rb:7:in `exit'
app/controllers/api/users_controller.rb:7:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 22:48:28 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"John Doe", "email"=>"john@example.com", "birth_date"=>"1990-01-01", "gender"=>"Male"}}
[31mUnpermitted parameters: :email, :gender. Context: { controller: Api::UsersController, action: create, request: #<ActionDispatch::Request:0x00000001070e4928>, params: {"user"=>{"name"=>"John Doe", "email"=>"john@example.com", "birth_date"=>"1990-01-01", "gender"=>"Male"}, "controller"=>"api/users", "action"=>"create"} }[0m
[31mUnpermitted parameters: :email, :gender. Context: { controller: Api::UsersController, action: create, request: #<ActionDispatch::Request:0x00000001070e4928>, params: {"user"=>{"name"=>"John Doe", "email"=>"john@example.com", "birth_date"=>"1990-01-01", "gender"=>"Male"}, "controller"=>"api/users", "action"=>"create"} }[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 710)


  
SystemExit (#<ActionController::Parameters {"name"=>"John Doe", "birth_date"=>"1990-01-01"} permitted: true>):
  
app/controllers/api/users_controller.rb:7:in `abort'
app/controllers/api/users_controller.rb:7:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 22:49:04 +0700
Error occurred while parsing request parameters.
Contents:

{
  "user": {
    "name": "Sang mr",
    "birth_date": "1990-01-01",
  }
}
Processing by Api::UsersController#create as */*
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 736)


  
ActionDispatch::Http::Parameters::ParseError (Error occurred while parsing request parameters):
  
app/controllers/api/users_controller.rb:24:in `user_params'
app/controllers/api/users_controller.rb:6:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 22:49:16 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 533)


  
SystemExit (#<ActionController::Parameters {"name"=>"Sang mr", "birth_date"=>"1990-01-01"} permitted: true>):
  
app/controllers/api/users_controller.rb:7:in `abort'
app/controllers/api/users_controller.rb:7:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 22:49:40 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 490)


  
SystemExit (Stop here):
  
app/controllers/api/users_controller.rb:7:in `abort'
app/controllers/api/users_controller.rb:7:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 22:50:00 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 524)


  
TypeError (no implicit conversion of ActionController::Parameters into String):
  
app/controllers/api/users_controller.rb:7:in `abort'
app/controllers/api/users_controller.rb:7:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 22:50:10 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 522)


  
SystemExit (#<ActionController::Parameters {"name"=>"Sang mr", "birth_date"=>"1990-01-01"} permitted: true>):
  
app/controllers/api/users_controller.rb:7:in `abort'
app/controllers/api/users_controller.rb:7:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 22:50:49 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:11:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/users_controller.rb:11:in `create'
Completed 422 Unprocessable Entity in 23ms (Views: 0.1ms | ActiveRecord: 2.9ms | Allocations: 15298)


Started POST "/api/users" for ::1 at 2023-11-25 22:54:16 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
Completed 500 Internal Server Error in 30ms (ActiveRecord: 1.6ms | Allocations: 5113)


  
ActiveRecord::StatementInvalid (Could not find table 'system_users'):
  
app/controllers/api/users_controller.rb:9:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 22:57:24 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:9:in `create'
Completed 500 Internal Server Error in 23ms (ActiveRecord: 0.7ms | Allocations: 10391)


  
NoMethodError (undefined method `users' for #<SystemUser id: 1, user_name: "sang", password: [FILTERED], created_at: nil, updated_at: nil>):
  
app/controllers/api/users_controller.rb:13:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 23:03:04 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (1.3ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:9:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:14:in `create'
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "entities" ("wallet_id", "system_user_id", "type", "name", "birth_date", "description", "symbol", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["wallet_id", nil], ["system_user_id", 1], ["type", "User"], ["name", "Sang mr"], ["birth_date", "1990-01-01"], ["description", nil], ["symbol", nil], ["created_at", "2023-11-25 16:03:04.774770"], ["updated_at", "2023-11-25 16:03:04.774770"]]
  â†³ app/controllers/api/users_controller.rb:14:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:14:in `create'
Completed 500 Internal Server Error in 46ms (ActiveRecord: 3.9ms | Allocations: 22029)


  
NoMethodError (undefined method `user_id=' for #<Wallet id: nil, name: nil, created_at: nil, updated_at: nil>):
  
app/controllers/api/users_controller.rb:15:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 23:03:27 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:9:in `create'
Completed 500 Internal Server Error in 26ms (ActiveRecord: 2.0ms | Allocations: 12344)


  
ActiveRecord::HasManyThroughSourceAssociationNotFoundError (Could not find the source association(s) "user" or :users in model Entity. Try 'has_many :users, :through => :entities, :source => <name>'. Is it one of wallet, transactions, or system_user?):
  
app/controllers/api/users_controller.rb:13:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 23:06:11 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:9:in `create'
Completed 500 Internal Server Error in 32ms (ActiveRecord: 3.0ms | Allocations: 11206)


  
ActiveModel::UnknownAttributeError (unknown attribute 'name' for SystemUser.):
  
app/controllers/api/users_controller.rb:13:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 23:08:26 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
Completed 500 Internal Server Error in 16ms (ActiveRecord: 2.2ms | Allocations: 12235)


  
NameError (undefined local variable or method `system_user' for #<Api::UsersController:0x0000000003f3b8>):
  
app/controllers/api/users_controller.rb:15:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 23:08:49 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:16:in `create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:16:in `create'
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "entities" ("wallet_id", "system_user_id", "type", "name", "birth_date", "description", "symbol", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["wallet_id", nil], ["system_user_id", 1], ["type", "User"], ["name", "Sang mr"], ["birth_date", "1990-01-01"], ["description", nil], ["symbol", nil], ["created_at", "2023-11-25 16:08:49.420866"], ["updated_at", "2023-11-25 16:08:49.420866"]]
  â†³ app/controllers/api/users_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:16:in `create'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 4.6ms | Allocations: 19409)


  
NoMethodError (undefined method `user_id=' for #<Wallet id: nil, name: nil, created_at: nil, updated_at: nil>):
  
app/controllers/api/users_controller.rb:17:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 23:10:13 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:13:in `create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:13:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "entities" ("wallet_id", "system_user_id", "type", "name", "birth_date", "description", "symbol", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["wallet_id", nil], ["system_user_id", 1], ["type", "User"], ["name", "Sang mr"], ["birth_date", "1990-01-01"], ["description", nil], ["symbol", nil], ["created_at", "2023-11-25 16:10:14.003315"], ["updated_at", "2023-11-25 16:10:14.003315"]]
  â†³ app/controllers/api/users_controller.rb:13:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:13:in `create'
Completed 201 Created in 36ms (Views: 0.8ms | ActiveRecord: 4.1ms | Allocations: 20179)


Started POST "/api/users" for ::1 at 2023-11-25 23:11:49 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:13:in `create'
  [1m[36mSystemUser Load (1.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:13:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "entities" ("wallet_id", "system_user_id", "type", "name", "birth_date", "description", "symbol", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["wallet_id", nil], ["system_user_id", 1], ["type", "User"], ["name", "Sang mr"], ["birth_date", "1990-01-01"], ["description", nil], ["symbol", nil], ["created_at", "2023-11-25 16:11:49.612831"], ["updated_at", "2023-11-25 16:11:49.612831"]]
  â†³ app/controllers/api/users_controller.rb:13:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:13:in `create'
Completed 201 Created in 6ms (Views: 0.3ms | ActiveRecord: 1.5ms | Allocations: 2968)


Started POST "/api/users" for ::1 at 2023-11-25 23:18:02 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:14:in `block in create'
  [1m[36mSystemUser Load (1.5ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:14:in `block in create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "entities" ("wallet_id", "system_user_id", "type", "name", "birth_date", "description", "symbol", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["wallet_id", nil], ["system_user_id", 1], ["type", "User"], ["name", "Sang mr"], ["birth_date", "1990-01-01"], ["description", nil], ["symbol", nil], ["created_at", "2023-11-25 16:18:02.775224"], ["updated_at", "2023-11-25 16:18:02.775224"]]
  â†³ app/controllers/api/users_controller.rb:14:in `block in create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/users_controller.rb:13:in `create'
Completed 422 Unprocessable Entity in 24ms (ActiveRecord: 2.3ms | Allocations: 19071)


  
ActiveRecord::RecordInvalid (Validation failed: Entity must exist):
  
app/controllers/api/users_controller.rb:16:in `block in create'
app/controllers/api/users_controller.rb:13:in `create'
Started POST "/api/users" for ::1 at 2023-11-25 23:19:00 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:14:in `block in create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:14:in `block in create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "entities" ("wallet_id", "system_user_id", "type", "name", "birth_date", "description", "symbol", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["wallet_id", nil], ["system_user_id", 1], ["type", "User"], ["name", "Sang mr"], ["birth_date", "1990-01-01"], ["description", nil], ["symbol", nil], ["created_at", "2023-11-25 16:19:00.627729"], ["updated_at", "2023-11-25 16:19:00.627729"]]
  â†³ app/controllers/api/users_controller.rb:14:in `block in create'
  [1m[36mWallet Create (0.2ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr"], ["created_at", "2023-11-25 16:19:00.629507"], ["updated_at", "2023-11-25 16:19:00.629507"]]
  â†³ app/controllers/api/users_controller.rb:16:in `block in create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:13:in `create'
No template found for Api::UsersController#create, rendering head :no_content
Completed 204 No Content in 29ms (ActiveRecord: 3.5ms | Allocations: 19842)


Started POST "/api/teams" for ::1 at 2023-11-26 10:16:03 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::TeamsController#create as */*
  Parameters: {"team"=>{"description"=>"Team A"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/teams_controller.rb:12:in `create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/teams_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/teams_controller.rb:12:in `create'
Completed 422 Unprocessable Entity in 76ms (Views: 0.3ms | ActiveRecord: 3.0ms | Allocations: 36770)


Started POST "/api/teams" for ::1 at 2023-11-26 10:17:18 +0700
Processing by Api::TeamsController#create as */*
  Parameters: {"team"=>{"name"=>"Team A", "description"=>"Team A of Company A"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/teams_controller.rb:12:in `create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/teams_controller.rb:12:in `create'
  [1m[36mTeam Create (1.1ms)[0m  [1m[32mINSERT INTO "entities" ("wallet_id", "system_user_id", "type", "name", "birth_date", "description", "symbol", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["wallet_id", nil], ["system_user_id", 2], ["type", "Team"], ["name", "Team A"], ["birth_date", nil], ["description", "Team A of Company A"], ["symbol", nil], ["created_at", "2023-11-26 03:17:19.176915"], ["updated_at", "2023-11-26 03:17:19.176915"]]
  â†³ app/controllers/api/teams_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/teams_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/teams_controller.rb:14:in `create'
  [1m[36mWallet Create (0.8ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Team A"], ["created_at", "2023-11-26 03:17:19.196645"], ["updated_at", "2023-11-26 03:17:19.196645"]]
  â†³ app/controllers/api/teams_controller.rb:14:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/teams_controller.rb:14:in `create'
Completed 201 Created in 47ms (Views: 0.3ms | ActiveRecord: 5.0ms | Allocations: 21529)


Started POST "/api/users" for ::1 at 2023-11-26 10:22:15 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:19:in `create'
  [1m[36mWallet Create (0.8ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr"], ["created_at", "2023-11-26 03:22:16.148909"], ["updated_at", "2023-11-26 03:22:16.148909"]]
  â†³ app/controllers/api/users_controller.rb:19:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:19:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:24:in `create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:24:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "entities" ("wallet_id", "system_user_id", "type", "name", "birth_date", "description", "symbol", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["wallet_id", 3], ["system_user_id", 1], ["type", "User"], ["name", "Sang mr"], ["birth_date", "1990-01-01"], ["description", nil], ["symbol", nil], ["created_at", "2023-11-26 03:22:16.158921"], ["updated_at", "2023-11-26 03:22:16.158921"]]
  â†³ app/controllers/api/users_controller.rb:24:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:24:in `create'
Completed 201 Created in 30ms (Views: 0.3ms | ActiveRecord: 4.1ms | Allocations: 20428)


Started POST "/api/teams" for ::1 at 2023-11-26 10:22:52 +0700
Processing by Api::TeamsController#create as */*
  Parameters: {"team"=>{"name"=>"Team A", "description"=>"Team A of Company A"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/teams_controller.rb:11:in `create'
  [1m[36mWallet Create (0.9ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Team A"], ["created_at", "2023-11-26 03:22:52.351948"], ["updated_at", "2023-11-26 03:22:52.351948"]]
  â†³ app/controllers/api/teams_controller.rb:11:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/teams_controller.rb:11:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/teams_controller.rb:15:in `create'
  [1m[36mSystemUser Load (1.3ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/api/teams_controller.rb:15:in `create'
  [1m[36mTeam Create (0.2ms)[0m  [1m[32mINSERT INTO "entities" ("wallet_id", "system_user_id", "type", "name", "birth_date", "description", "symbol", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["wallet_id", 4], ["system_user_id", 2], ["type", "Team"], ["name", "Team A"], ["birth_date", nil], ["description", "Team A of Company A"], ["symbol", nil], ["created_at", "2023-11-26 03:22:52.358528"], ["updated_at", "2023-11-26 03:22:52.358528"]]
  â†³ app/controllers/api/teams_controller.rb:15:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/teams_controller.rb:15:in `create'
Completed 201 Created in 14ms (Views: 0.4ms | ActiveRecord: 2.7ms | Allocations: 7917)


Started POST "/api/deposit" for ::1 at 2023-11-26 10:48:52 +0700
  
SyntaxError (/Users/sangngo/Works/Projects2/internal_wallet/app/controllers/api/wallets_controller.rb:21: syntax error, unexpected local variable or method, expecting ')'
            message: params[:message]
            ^~~~~~~
/Users/sangngo/Works/Projects2/internal_wallet/app/controllers/api/wallets_controller.rb:36: syntax error, unexpected `end'
  end
  ^~~
):
  
app/controllers/api/wallets_controller.rb:21: syntax error, unexpected local variable or method, expecting ')'
app/controllers/api/wallets_controller.rb:36: syntax error, unexpected `end'
Started POST "/api/deposit" for ::1 at 2023-11-26 10:49:27 +0700
  
SyntaxError (/Users/sangngo/Works/Projects2/internal_wallet/app/controllers/api/wallets_controller.rb:21: syntax error, unexpected local variable or method, expecting ')'
            message: params[:message]
            ^~~~~~~
/Users/sangngo/Works/Projects2/internal_wallet/app/controllers/api/wallets_controller.rb:36: syntax error, unexpected `end'
  end
  ^~~
):
  
app/controllers/api/wallets_controller.rb:21: syntax error, unexpected local variable or method, expecting ')'
app/controllers/api/wallets_controller.rb:36: syntax error, unexpected `end'
Started POST "/api/deposit" for ::1 at 2023-11-26 10:50:39 +0700
  
SyntaxError (/Users/sangngo/Works/Projects2/internal_wallet/app/controllers/api/wallets_controller.rb:21: syntax error, unexpected local variable or method, expecting ')'
            message: params[:message]
            ^~~~~~~
/Users/sangngo/Works/Projects2/internal_wallet/app/controllers/api/wallets_controller.rb:36: syntax error, unexpected `end'
  end
  ^~~
):
  
app/controllers/api/wallets_controller.rb:21: syntax error, unexpected local variable or method, expecting ')'
app/controllers/api/wallets_controller.rb:36: syntax error, unexpected `end'
Started POST "/api/deposit" for ::1 at 2023-11-26 10:50:50 +0700
  
SyntaxError (/Users/sangngo/Works/Projects2/internal_wallet/app/controllers/api/wallets_controller.rb:21: syntax error, unexpected local variable or method, expecting ')'
            message: params[:message]
            ^~~~~~~
/Users/sangngo/Works/Projects2/internal_wallet/app/controllers/api/wallets_controller.rb:36: syntax error, unexpected `end'
  end
  ^~~
):
  
app/controllers/api/wallets_controller.rb:21: syntax error, unexpected local variable or method, expecting ')'
app/controllers/api/wallets_controller.rb:36: syntax error, unexpected `end'
Started POST "/api/deposit" for ::1 at 2023-11-26 10:51:06 +0700
  
SyntaxError (/Users/sangngo/Works/Projects2/internal_wallet/app/controllers/api/wallets_controller.rb:21: syntax error, unexpected local variable or method, expecting ')'
            message: params[:message]
            ^~~~~~~
/Users/sangngo/Works/Projects2/internal_wallet/app/controllers/api/wallets_controller.rb:36: syntax error, unexpected `end'
  end
  ^~~
):
  
app/controllers/api/wallets_controller.rb:21: syntax error, unexpected local variable or method, expecting ')'
app/controllers/api/wallets_controller.rb:36: syntax error, unexpected `end'
Started POST "/api/deposit" for ::1 at 2023-11-26 10:51:42 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"wallet_id"=>"3", "amount"=>"100", "description"=>"Transfer from Bank account"}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 542)


  
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
actionpack (7.1.2) lib/action_controller/metal/request_forgery_protection.rb:293:in `handle_unverified_request'
actionpack (7.1.2) lib/action_controller/metal/request_forgery_protection.rb:388:in `handle_unverified_request'
actionpack (7.1.2) lib/action_controller/metal/request_forgery_protection.rb:377:in `verify_authenticity_token'
activesupport (7.1.2) lib/active_support/callbacks.rb:403:in `block in make_lambda'
activesupport (7.1.2) lib/active_support/callbacks.rb:202:in `block (2 levels) in halting'
actionpack (7.1.2) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (7.1.2) lib/active_support/callbacks.rb:203:in `block in halting'
activesupport (7.1.2) lib/active_support/callbacks.rb:598:in `block in invoke_before'
activesupport (7.1.2) lib/active_support/callbacks.rb:598:in `each'
activesupport (7.1.2) lib/active_support/callbacks.rb:598:in `invoke_before'
activesupport (7.1.2) lib/active_support/callbacks.rb:119:in `block in run_callbacks'
activesupport (7.1.2) lib/active_support/callbacks.rb:141:in `run_callbacks'
actionpack (7.1.2) lib/abstract_controller/callbacks.rb:258:in `process_action'
actionpack (7.1.2) lib/action_controller/metal/rescue.rb:25:in `process_action'
actionpack (7.1.2) lib/action_controller/metal/instrumentation.rb:74:in `block in process_action'
activesupport (7.1.2) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.1.2) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (7.1.2) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.1.2) lib/action_controller/metal/instrumentation.rb:73:in `process_action'
actionpack (7.1.2) lib/action_controller/metal/params_wrapper.rb:261:in `process_action'
activerecord (7.1.2) lib/active_record/railties/controller_runtime.rb:32:in `process_action'
actionpack (7.1.2) lib/abstract_controller/base.rb:160:in `process'
actionview (7.1.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
rack (3.0.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.8) lib/rack/etag.rb:29:in `call'
rack (3.0.8) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.8) lib/rack/head.rb:15:in `call'
actionpack (7.1.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (7.1.2) lib/active_record/migration.rb:654:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started POST "/api/deposit" for ::1 at 2023-11-26 10:52:34 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"wallet_id"=>"3", "amount"=>"100", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:31:in `set_user_and_wallet'
Filter chain halted as :set_user_and_wallet rendered or redirected
Completed 404 Not Found in 7ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 3844)


Started POST "/api/deposit" for ::1 at 2023-11-26 10:53:20 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"wallet_id"=>"3", "amount"=>"100", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:31:in `set_user_and_wallet'
Filter chain halted as :set_user_and_wallet rendered or redirected
Completed 404 Not Found in 8ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 4329)


Started POST "/api/deposit" for ::1 at 2023-11-26 10:55:52 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"wallet_id"=>"3", "amount"=>"100", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:31:in `set_user_and_wallet'
Filter chain halted as :set_user_and_wallet rendered or redirected
Completed 404 Not Found in 12ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 5282)


Started POST "/api/deposit" for ::1 at 2023-11-26 10:57:02 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"wallet_id"=>"3", "amount"=>"100", "description"=>"Transfer from Bank account"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 503)


  
SystemExit (#<ActionController::Parameters {"wallet_id"=>"3", "amount"=>"100", "description"=>"Transfer from Bank account", "controller"=>"api/wallets", "action"=>"deposit"} permitted: false>):
  
app/controllers/api/wallets_controller.rb:31:in `abort'
app/controllers/api/wallets_controller.rb:31:in `set_user_and_wallet'
Started POST "/api/deposit" for ::1 at 2023-11-26 10:57:57 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"wallet_id"=>"3", "amount"=>"100", "description"=>"Transfer from Bank account"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 480)


  
SystemExit (3):
  
app/controllers/api/wallets_controller.rb:31:in `abort'
app/controllers/api/wallets_controller.rb:31:in `set_user_and_wallet'
Started POST "/api/deposit" for ::1 at 2023-11-26 10:58:24 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"wallet_id"=>"3", "amount"=>"100", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:32:in `set_user_and_wallet'
Filter chain halted as :set_user_and_wallet rendered or redirected
Completed 404 Not Found in 12ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 4382)


Started POST "/api/deposit" for ::1 at 2023-11-26 10:59:27 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"wallet_id"=>"3", "amount"=>"100", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:32:in `set_user_and_wallet'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 2.0ms | Allocations: 4590)


  
NameError (undefined local variable or method `e' for #<Api::WalletsController:0x0000000003b1f0>):
  
app/controllers/api/wallets_controller.rb:34:in `rescue in set_user_and_wallet'
app/controllers/api/wallets_controller.rb:30:in `set_user_and_wallet'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:00:03 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"wallet_id"=>"3", "amount"=>"100", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:32:in `set_user_and_wallet'
User not found: Couldn't find User with 'id'=3
Filter chain halted as :set_user_and_wallet rendered or redirected
Completed 404 Not Found in 8ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 4365)


Started POST "/api/deposit" for ::1 at 2023-11-26 11:01:31 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"wallet_id"=>"3", "amount"=>"100", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:31:in `set_user_and_wallet'
User not found: Couldn't find User with 'id'=3
Filter chain halted as :set_user_and_wallet rendered or redirected
Completed 404 Not Found in 8ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 4353)


Started POST "/api/deposit" for ::1 at 2023-11-26 11:07:13 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"wallet_id"=>"3", "amount"=>"100", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:31:in `set_user_and_wallet'
Completed 500 Internal Server Error in 14ms (ActiveRecord: 1.4ms | Allocations: 11034)


  
SystemExit (#<User id: 7, wallet_id: 3, system_user_id: 1, type: "User", name: "Sang mr", birth_date: "1990-01-01", description: nil, symbol: nil, created_at: "2023-11-26 03:22:16.158921000 +0000", updated_at: "2023-11-26 03:22:16.158921000 +0000">):
  
app/controllers/api/wallets_controller.rb:32:in `abort'
app/controllers/api/wallets_controller.rb:32:in `set_user_and_wallet'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:09:47 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"wallet_id"=>"3", "amount"=>"100", "description"=>"Transfer from Bank account"}
User not found: Couldn't find User without an ID
Filter chain halted as :set_user_and_wallet rendered or redirected
Completed 404 Not Found in 7ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 3469)


Started POST "/api/deposit" for ::1 at 2023-11-26 11:10:00 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:31:in `set_user_and_wallet'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.2ms | Allocations: 8728)


  
SystemExit (#<User id: 7, wallet_id: 3, system_user_id: 1, type: "User", name: "Sang mr", birth_date: "1990-01-01", description: nil, symbol: nil, created_at: "2023-11-26 03:22:16.158921000 +0000", updated_at: "2023-11-26 03:22:16.158921000 +0000">):
  
app/controllers/api/wallets_controller.rb:32:in `abort'
app/controllers/api/wallets_controller.rb:32:in `set_user_and_wallet'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:10:09 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:31:in `set_user_and_wallet'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:15:in `block in deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:14:in `deposit'
Completed 500 Internal Server Error in 34ms (ActiveRecord: 3.3ms | Allocations: 20513)


  
ActiveModel::UnknownAttributeError (unknown attribute 'user' for Transaction.):
  
app/controllers/api/wallets_controller.rb:15:in `block in deposit'
app/controllers/api/wallets_controller.rb:14:in `deposit'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:11:08 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:30:in `set_user_and_wallet'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:15:in `block in deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:14:in `deposit'
Completed 500 Internal Server Error in 31ms (ActiveRecord: 4.4ms | Allocations: 18331)


  
ActiveRecord::AssociationTypeMismatch (Wallet(#165280) expected, got 3 which is an instance of Integer(#2440)):
  
app/controllers/api/wallets_controller.rb:15:in `block in deposit'
app/controllers/api/wallets_controller.rb:14:in `deposit'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:11:47 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:30:in `set_user_and_wallet'
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.1ms | Allocations: 959)


  
ActiveRecord::AssociationTypeMismatch (Wallet(#165280) expected, got 3 which is an instance of Integer(#2440)):
  
app/controllers/api/wallets_controller.rb:15:in `block in deposit'
app/controllers/api/wallets_controller.rb:14:in `deposit'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:14:48 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:31:in `set_user_and_wallet'
Completed 500 Internal Server Error in 15ms (ActiveRecord: 1.7ms | Allocations: 11521)


  
SystemExit (100.0):
  
app/controllers/api/wallets_controller.rb:8:in `abort'
app/controllers/api/wallets_controller.rb:8:in `deposit'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:15:20 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:31:in `set_user_and_wallet'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `block in deposit'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:15:in `deposit'
Completed 500 Internal Server Error in 43ms (ActiveRecord: 3.7ms | Allocations: 18304)


  
ActiveRecord::AssociationTypeMismatch (Wallet(#180840) expected, got 3 which is an instance of Integer(#2440)):
  
app/controllers/api/wallets_controller.rb:16:in `block in deposit'
app/controllers/api/wallets_controller.rb:15:in `deposit'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:18:10 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:31:in `set_user_and_wallet'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `block in deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:15:in `deposit'
Completed 500 Internal Server Error in 36ms (ActiveRecord: 3.8ms | Allocations: 18299)


  
ActiveRecord::AssociationTypeMismatch (Wallet(#188460) expected, got 3 which is an instance of Integer(#2440)):
  
app/controllers/api/wallets_controller.rb:16:in `block in deposit'
app/controllers/api/wallets_controller.rb:15:in `deposit'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:18:21 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:31:in `set_user_and_wallet'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `block in deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:15:in `deposit'
Completed 500 Internal Server Error in 32ms (ActiveRecord: 4.1ms | Allocations: 18299)


  
ActiveRecord::AssociationTypeMismatch (Wallet(#196060) expected, got 3 which is an instance of Integer(#2440)):
  
app/controllers/api/wallets_controller.rb:16:in `block in deposit'
app/controllers/api/wallets_controller.rb:15:in `deposit'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:18:44 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:31:in `set_user_and_wallet'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `block in deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:15:in `deposit'
Completed 500 Internal Server Error in 31ms (ActiveRecord: 2.8ms | Allocations: 18299)


  
ActiveRecord::AssociationTypeMismatch (Wallet(#203720) expected, got 3 which is an instance of Integer(#2440)):
  
app/controllers/api/wallets_controller.rb:16:in `block in deposit'
app/controllers/api/wallets_controller.rb:15:in `deposit'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:19:31 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:31:in `set_user_and_wallet'
Completed 500 Internal Server Error in 29ms (ActiveRecord: 2.9ms | Allocations: 17526)


  
ActiveRecord::AssociationTypeMismatch (Wallet(#211400) expected, got 3 which is an instance of Integer(#2440)):
  
app/controllers/api/wallets_controller.rb:16:in `deposit'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:22:52 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:34:in `set_user_and_wallet'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:20:in `deposit'
  [1m[36mTransaction Create (0.9ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 100.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-26 04:22:53.249657"], ["updated_at", "2023-11-26 04:22:53.249657"]]
  â†³ app/controllers/api/wallets_controller.rb:20:in `deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:20:in `deposit'
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."entity_id" = ? LIMIT ?[0m  [["entity_id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:21:in `deposit'
Completed 500 Internal Server Error in 41ms (ActiveRecord: 4.8ms | Allocations: 21264)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: wallets.entity_id):
  
Started POST "/api/deposit" for ::1 at 2023-11-26 11:23:45 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:35:in `set_user_and_wallet'
Completed 500 Internal Server Error in 16ms (ActiveRecord: 1.7ms | Allocations: 11476)


  
SystemExit (3):
  
app/controllers/api/wallets_controller.rb:15:in `abort'
app/controllers/api/wallets_controller.rb:15:in `deposit'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:23:55 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:35:in `set_user_and_wallet'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:21:in `deposit'
  [1m[36mTransaction Create (1.1ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 100.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-26 04:23:55.476683"], ["updated_at", "2023-11-26 04:23:55.476683"]]
  â†³ app/controllers/api/wallets_controller.rb:21:in `deposit'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:21:in `deposit'
  [1m[36mWallet Load (0.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."entity_id" = ? LIMIT ?[0m  [["entity_id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:22:in `deposit'
Completed 500 Internal Server Error in 32ms (ActiveRecord: 4.5ms | Allocations: 20527)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: wallets.entity_id):
  
Started POST "/api/deposit" for ::1 at 2023-11-26 11:27:15 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:36:in `set_user_and_wallet'
Completed 500 Internal Server Error in 27ms (ActiveRecord: 2.4ms | Allocations: 17395)


  
ActiveRecord::AssociationTypeMismatch (Wallet(#242380) expected, got 3 which is an instance of Integer(#2440)):
  
app/controllers/api/wallets_controller.rb:18:in `deposit'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:30:02 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:37:in `set_user_and_wallet'
Completed 500 Internal Server Error in 23ms (ActiveRecord: 2.1ms | Allocations: 15963)


  
SystemExit (#<Transaction id: nil, source_wallet_id: nil, target_wallet_id: nil, amount: nil, description: nil, message: nil, created_at: nil, updated_at: nil>):
  
app/controllers/api/wallets_controller.rb:17:in `abort'
app/controllers/api/wallets_controller.rb:17:in `deposit'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:31:05 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:37:in `set_user_and_wallet'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:23:in `deposit'
  [1m[36mTransaction Create (0.9ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 100.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-26 04:31:05.446177"], ["updated_at", "2023-11-26 04:31:05.446177"]]
  â†³ app/controllers/api/wallets_controller.rb:23:in `deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:23:in `deposit'
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."entity_id" = ? LIMIT ?[0m  [["entity_id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:24:in `deposit'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 4.2ms | Allocations: 20527)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: wallets.entity_id):
  
Started POST "/api/deposit" for ::1 at 2023-11-26 11:31:28 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:37:in `set_user_and_wallet'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:23:in `deposit'
  [1m[36mTransaction Create (0.8ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 100.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-26 04:31:28.329644"], ["updated_at", "2023-11-26 04:31:28.329644"]]
  â†³ app/controllers/api/wallets_controller.rb:23:in `deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:23:in `deposit'
  [1m[36mWallet Load (0.7ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."entity_id" = ? LIMIT ?[0m  [["entity_id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:24:in `deposit'
Completed 500 Internal Server Error in 40ms (ActiveRecord: 5.2ms | Allocations: 20851)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: wallets.entity_id):
  
Started POST "/api/deposit" for ::1 at 2023-11-26 11:31:38 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:37:in `set_user_and_wallet'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:23:in `deposit'
  [1m[36mTransaction Create (0.9ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 100.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-26 04:31:38.334442"], ["updated_at", "2023-11-26 04:31:38.334442"]]
  â†³ app/controllers/api/wallets_controller.rb:23:in `deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:23:in `deposit'
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."entity_id" = ? LIMIT ?[0m  [["entity_id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:24:in `deposit'
Completed 500 Internal Server Error in 30ms (ActiveRecord: 3.7ms | Allocations: 20515)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: wallets.entity_id):
  
Started POST "/api/deposit" for ::1 at 2023-11-26 11:33:05 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:7:in `deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:25:in `deposit'
  [1m[36mTransaction Create (0.8ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 100.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-26 04:33:05.414002"], ["updated_at", "2023-11-26 04:33:05.414002"]]
  â†³ app/controllers/api/wallets_controller.rb:25:in `deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:25:in `deposit'
Completed 500 Internal Server Error in 41ms (ActiveRecord: 4.1ms | Allocations: 17461)


  
NoMethodError (undefined method `wallet' for nil:NilClass):
  
app/controllers/api/wallets_controller.rb:26:in `deposit'
Started POST "/api/deposit" for ::1 at 2023-11-26 11:33:50 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:7:in `deposit'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:25:in `deposit'
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 100.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-26 04:33:50.434738"], ["updated_at", "2023-11-26 04:33:50.434738"]]
  â†³ app/controllers/api/wallets_controller.rb:25:in `deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:25:in `deposit'
Completed 201 Created in 26ms (Views: 0.3ms | ActiveRecord: 3.0ms | Allocations: 17344)


Started POST "/api/deposit" for ::1 at 2023-11-26 11:35:12 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:37:in `set_user_and_wallet'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:23:in `deposit'
  [1m[36mTransaction Create (0.8ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 100.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-26 04:35:12.240465"], ["updated_at", "2023-11-26 04:35:12.240465"]]
  â†³ app/controllers/api/wallets_controller.rb:23:in `deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:23:in `deposit'
Completed 201 Created in 26ms (Views: 0.8ms | ActiveRecord: 3.0ms | Allocations: 17282)


Started POST "/api/deposit" for ::1 at 2023-11-26 11:38:16 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:44:in `set_user_and_wallet'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `block in deposit'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 100.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-26 04:38:17.054962"], ["updated_at", "2023-11-26 04:38:17.054962"]]
  â†³ app/controllers/api/wallets_controller.rb:16:in `block in deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:15:in `deposit'
Completed 201 Created in 31ms (Views: 0.4ms | ActiveRecord: 3.1ms | Allocations: 17314)


Started POST "/api/withdraw" for ::1 at 2023-11-26 11:49:56 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `set_user_and_wallet'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:51:in `block in withdraw'
  [1m[36mTransaction Create (7.6ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 100.0], ["description", "Withdraw in ATM"], ["message", nil], ["created_at", "2023-11-26 04:49:56.719388"], ["updated_at", "2023-11-26 04:49:56.719388"]]
  â†³ app/controllers/api/wallets_controller.rb:51:in `block in withdraw'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:50:in `withdraw'
Completed 201 Created in 99ms (Views: 0.4ms | ActiveRecord: 10.4ms | Allocations: 16234)


Started POST "/api/withdraw" for ::1 at 2023-11-26 11:50:01 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `set_user_and_wallet'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:51:in `block in withdraw'
  [1m[36mTransaction Create (1.0ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 100.0], ["description", "Withdraw in ATM"], ["message", nil], ["created_at", "2023-11-26 04:50:01.148441"], ["updated_at", "2023-11-26 04:50:01.148441"]]
  â†³ app/controllers/api/wallets_controller.rb:51:in `block in withdraw'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:50:in `withdraw'
Completed 201 Created in 5ms (Views: 0.3ms | ActiveRecord: 1.2ms | Allocations: 1920)


Started POST "/api/withdraw" for ::1 at 2023-11-26 11:55:14 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"0", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `set_user_and_wallet'
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 746)


Started POST "/api/withdraw" for ::1 at 2023-11-26 11:58:47 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"0", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:71:in `set_user_and_wallet'
Completed 422 Unprocessable Entity in 14ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 11257)


Started POST "/api/withdraw" for ::1 at 2023-11-26 11:59:11 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"100", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:72:in `set_user_and_wallet'
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."entity_id" = ? LIMIT ?[0m  [["entity_id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:50:in `withdraw'
Completed 500 Internal Server Error in 23ms (ActiveRecord: 2.3ms | Allocations: 14435)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: wallets.entity_id):
  
Started POST "/api/withdraw" for ::1 at 2023-11-26 11:59:56 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"100", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:72:in `set_user_and_wallet'
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."entity_id" = ? LIMIT ?[0m  [["entity_id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:50:in `withdraw'
Completed 500 Internal Server Error in 19ms (ActiveRecord: 2.3ms | Allocations: 14456)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: wallets.entity_id):
  
Started POST "/api/withdraw" for ::1 at 2023-11-26 12:00:18 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"100", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:72:in `set_user_and_wallet'
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."entity_id" = ? LIMIT ?[0m  [["entity_id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:50:in `withdraw'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 2.3ms | Allocations: 14786)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: wallets.entity_id):
  
Started POST "/api/withdraw" for ::1 at 2023-11-26 12:08:15 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"10000", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:71:in `set_user_and_wallet'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:51:in `withdraw'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
Completed 422 Unprocessable Entity in 32ms (Views: 0.1ms | ActiveRecord: 2.2ms | Allocations: 19619)


Started POST "/api/withdraw" for ::1 at 2023-11-26 12:08:36 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"10000", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:71:in `set_user_and_wallet'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:50:in `withdraw'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
Completed 500 Internal Server Error in 27ms (ActiveRecord: 2.3ms | Allocations: 19983)


  
SystemExit (0.7e3):
  
app/controllers/api/wallets_controller.rb:50:in `abort'
app/controllers/api/wallets_controller.rb:50:in `withdraw'
Started POST "/api/withdraw" for ::1 at 2023-11-26 12:08:47 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"10000", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:71:in `set_user_and_wallet'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:50:in `withdraw'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
Completed 500 Internal Server Error in 28ms (ActiveRecord: 2.3ms | Allocations: 20098)


  
TypeError (no implicit conversion of BigDecimal into String):
  
app/controllers/api/wallets_controller.rb:50:in `abort'
app/controllers/api/wallets_controller.rb:50:in `withdraw'
Started POST "/api/withdraw" for ::1 at 2023-11-26 12:09:07 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"10000", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:71:in `set_user_and_wallet'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:50:in `withdraw'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
Completed 500 Internal Server Error in 29ms (ActiveRecord: 3.2ms | Allocations: 20094)


  
SystemExit (700.0):
  
app/controllers/api/wallets_controller.rb:50:in `abort'
app/controllers/api/wallets_controller.rb:50:in `withdraw'
Started POST "/api/withdraw" for ::1 at 2023-11-26 12:09:23 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"10000", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:71:in `set_user_and_wallet'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:51:in `withdraw'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
Completed 422 Unprocessable Entity in 28ms (Views: 0.1ms | ActiveRecord: 3.0ms | Allocations: 19835)


Started POST "/api/withdraw" for ::1 at 2023-11-26 12:11:28 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:70:in `set_user_and_wallet'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:50:in `withdraw'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:56:in `block in withdraw'
  [1m[36mTransaction Create (1.0ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 50.0], ["description", "Withdraw in ATM"], ["message", nil], ["created_at", "2023-11-26 05:11:28.527373"], ["updated_at", "2023-11-26 05:11:28.527373"]]
  â†³ app/controllers/api/wallets_controller.rb:56:in `block in withdraw'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:55:in `withdraw'
Completed 201 Created in 33ms (Views: 0.4ms | ActiveRecord: 3.4ms | Allocations: 24244)


Started POST "/api/withdraw" for ::1 at 2023-11-26 12:12:03 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:71:in `set_user_and_wallet'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:50:in `withdraw'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
Completed 500 Internal Server Error in 28ms (ActiveRecord: 2.3ms | Allocations: 20024)


  
SystemExit (650.0):
  
app/controllers/api/wallets_controller.rb:50:in `abort'
app/controllers/api/wallets_controller.rb:50:in `withdraw'
Started POST "/api/withdraw" for ::1 at 2023-11-26 12:14:42 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:70:in `set_user'
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:50:in `withdraw'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:56:in `block in withdraw'
  [1m[36mTransaction Create (4.3ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 50.0], ["description", "Withdraw in ATM"], ["message", nil], ["created_at", "2023-11-26 05:14:42.510439"], ["updated_at", "2023-11-26 05:14:42.510439"]]
  â†³ app/controllers/api/wallets_controller.rb:56:in `block in withdraw'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:55:in `withdraw'
Completed 201 Created in 44ms (Views: 0.5ms | ActiveRecord: 9.0ms | Allocations: 24353)


Started POST "/api/transfer" for ::1 at 2023-11-26 12:33:38 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms | Allocations: 2325)


  
NoMethodError (undefined method `wallet' for nil:NilClass):
  
app/controllers/api/wallets_controller.rb:65:in `block in transfer'
app/controllers/api/wallets_controller.rb:64:in `transfer'
Started POST "/api/withdraw" for ::1 at 2023-11-26 12:34:52 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:83:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:37:in `withdraw'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:43:in `withdraw'
  [1m[36mTransaction Create (1.0ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 10.0], ["description", "Withdraw in ATM"], ["message", nil], ["created_at", "2023-11-26 05:34:52.998367"], ["updated_at", "2023-11-26 05:34:52.998367"]]
  â†³ app/controllers/api/wallets_controller.rb:43:in `withdraw'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:43:in `withdraw'
Completed 201 Created in 49ms (Views: 0.5ms | ActiveRecord: 3.8ms | Allocations: 25582)


Started POST "/api/transfer" for ::1 at 2023-11-26 12:35:21 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:83:in `set_user'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 500 Internal Server Error in 31ms (ActiveRecord: 3.3ms | Allocations: 20927)


  
NoMethodError (undefined method `transactions' for #<Wallet id: 3, name: "Wallet of Sang mr", created_at: "2023-11-26 03:22:16.148909000 +0000", updated_at: "2023-11-26 03:22:16.148909000 +0000">):
  
app/controllers/api/wallets_controller.rb:67:in `block in transfer'
app/controllers/api/wallets_controller.rb:64:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 12:36:18 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:83:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 500 Internal Server Error in 28ms (ActiveRecord: 3.5ms | Allocations: 20927)


  
LocalJumpError (no block given (yield)):
  
app/controllers/api/wallets_controller.rb:67:in `block in transfer'
app/controllers/api/wallets_controller.rb:64:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 15:36:53 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:83:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 500 Internal Server Error in 106ms (ActiveRecord: 3.7ms | Allocations: 41930)


  
LocalJumpError (no block given (yield)):
  
app/controllers/api/wallets_controller.rb:67:in `block in transfer'
app/controllers/api/wallets_controller.rb:64:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 15:41:06 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:83:in `set_user'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 500 Internal Server Error in 30ms (ActiveRecord: 3.1ms | Allocations: 20929)


  
LocalJumpError (no block given (yield)):
  
app/controllers/api/wallets_controller.rb:67:in `block in transfer'
app/controllers/api/wallets_controller.rb:64:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 15:43:41 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:83:in `set_user'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 422 Unprocessable Entity in 52ms (ActiveRecord: 3.2ms | Allocations: 28633)


  
ActiveRecord::RecordInvalid (Validation failed: Description can't be blank):
  
app/controllers/api/wallets_controller.rb:67:in `block in transfer'
app/controllers/api/wallets_controller.rb:64:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 15:44:18 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:83:in `set_user'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 50.0], ["description", "Transfer to User id 8"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 08:44:18.333707"], ["updated_at", "2023-11-26 08:44:18.333707"]]
  â†³ app/controllers/api/wallets_controller.rb:67:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:70:in `block in transfer'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 500 Internal Server Error in 35ms (ActiveRecord: 3.3ms | Allocations: 26950)


  
LocalJumpError (no block given (yield)):
  
app/controllers/api/wallets_controller.rb:71:in `block in transfer'
app/controllers/api/wallets_controller.rb:64:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 15:50:31 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mWallet Load (0.6ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 500 Internal Server Error in 30ms (ActiveRecord: 2.5ms | Allocations: 19563)


  
TypeError (no implicit conversion of Integer into String):
  
app/controllers/api/wallets_controller.rb:67:in `+'
app/controllers/api/wallets_controller.rb:67:in `block in transfer'
app/controllers/api/wallets_controller.rb:64:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 15:50:52 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 50.0], ["description", "Transfer from wallet 3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 08:50:52.334422"], ["updated_at", "2023-11-26 08:50:52.334422"]]
  â†³ app/controllers/api/wallets_controller.rb:67:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:70:in `block in transfer'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 500 Internal Server Error in 39ms (ActiveRecord: 3.9ms | Allocations: 25758)


  
SystemExit (#<Wallet id: 4, name: "Wallet of Team A", created_at: "2023-11-26 03:22:52.351948000 +0000", updated_at: "2023-11-26 03:22:52.351948000 +0000">):
  
app/controllers/api/wallets_controller.rb:71:in `abort'
app/controllers/api/wallets_controller.rb:71:in `block in transfer'
app/controllers/api/wallets_controller.rb:64:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 15:51:34 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 50.0], ["description", "Transfer from wallet 3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 08:51:35.141691"], ["updated_at", "2023-11-26 08:51:35.141691"]]
  â†³ app/controllers/api/wallets_controller.rb:67:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:70:in `block in transfer'
  [1m[36mTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 4], ["target_wallet_id", nil], ["amount", 50.0], ["description", "Transfer from wallet4"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 08:51:35.145313"], ["updated_at", "2023-11-26 08:51:35.145313"]]
  â†³ app/controllers/api/wallets_controller.rb:72:in `block in transfer'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 500 Internal Server Error in 42ms (ActiveRecord: 4.1ms | Allocations: 26698)


  
NoMethodError (undefined method `current_balance' for #<Wallet id: 3, name: "Wallet of Sang mr", created_at: "2023-11-26 03:22:16.148909000 +0000", updated_at: "2023-11-26 03:22:16.148909000 +0000">):
  
app/controllers/api/wallets_controller.rb:74:in `block in transfer'
app/controllers/api/wallets_controller.rb:64:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 15:52:26 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 50.0], ["description", "Transfer from wallet 3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 08:52:26.596681"], ["updated_at", "2023-11-26 08:52:26.596681"]]
  â†³ app/controllers/api/wallets_controller.rb:67:in `block in transfer'
  [1m[36mWallet Load (0.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:70:in `block in transfer'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 4], ["target_wallet_id", nil], ["amount", 50.0], ["description", "Transfer from wallet4"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 08:52:26.609232"], ["updated_at", "2023-11-26 08:52:26.609232"]]
  â†³ app/controllers/api/wallets_controller.rb:72:in `block in transfer'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 500 Internal Server Error in 46ms (ActiveRecord: 3.4ms | Allocations: 26675)


  
NoMethodError (undefined method `current' for #<Wallet id: 3, name: "Wallet of Sang mr", created_at: "2023-11-26 03:22:16.148909000 +0000", updated_at: "2023-11-26 03:22:16.148909000 +0000">):
  
app/controllers/api/wallets_controller.rb:74:in `block in transfer'
app/controllers/api/wallets_controller.rb:64:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 15:52:46 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 50.0], ["description", "Transfer from wallet 3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 08:52:46.955862"], ["updated_at", "2023-11-26 08:52:46.955862"]]
  â†³ app/controllers/api/wallets_controller.rb:67:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:70:in `block in transfer'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 4], ["target_wallet_id", nil], ["amount", 50.0], ["description", "Transfer from wallet4"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 08:52:46.959130"], ["updated_at", "2023-11-26 08:52:46.959130"]]
  â†³ app/controllers/api/wallets_controller.rb:72:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 200 OK in 41ms (Views: 1.0ms | ActiveRecord: 3.9ms | Allocations: 27404)


Started POST "/api/transfer" for ::1 at 2023-11-26 15:57:56 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:85:in `set_user'
Completed 500 Internal Server Error in 14ms (ActiveRecord: 1.4ms | Allocations: 10930)


  
SystemExit (4):
  
app/controllers/api/wallets_controller.rb:58:in `abort'
app/controllers/api/wallets_controller.rb:58:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 15:58:28 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:85:in `set_user'
Completed 500 Internal Server Error in 15ms (ActiveRecord: 1.6ms | Allocations: 11572)


  
SystemExit (4):
  
app/controllers/api/wallets_controller.rb:58:in `abort'
app/controllers/api/wallets_controller.rb:58:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 16:01:15 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:85:in `set_user'
Completed 500 Internal Server Error in 62ms (ActiveRecord: 6.2ms | Allocations: 11574)


  
SystemExit (4):
  
app/controllers/api/wallets_controller.rb:58:in `abort'
app/controllers/api/wallets_controller.rb:58:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 16:01:20 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:85:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:66:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:66:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 50.0], ["description", "Transfer from wallet 3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:01:20.990894"], ["updated_at", "2023-11-26 09:01:20.990894"]]
  â†³ app/controllers/api/wallets_controller.rb:68:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `transfer'
Completed 200 OK in 42ms (Views: 0.7ms | ActiveRecord: 4.0ms | Allocations: 25437)


Started POST "/api/transfer" for ::1 at 2023-11-26 16:04:06 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:85:in `set_user'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:66:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:66:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 50.0], ["description", "Transfer from wallet 3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:04:06.296788"], ["updated_at", "2023-11-26 09:04:06.296788"]]
  â†³ app/controllers/api/wallets_controller.rb:68:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:71:in `block in transfer'
  [1m[36mTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 50.0], ["description", "Transfer to wallet4"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:04:06.314247"], ["updated_at", "2023-11-26 09:04:06.314247"]]
  â†³ app/controllers/api/wallets_controller.rb:73:in `block in transfer'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `transfer'
Completed 200 OK in 56ms (Views: 0.5ms | ActiveRecord: 3.7ms | Allocations: 27147)


Started POST "/api/transfer" for ::1 at 2023-11-26 16:05:36 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:85:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:66:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:66:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 50.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:05:36.891360"], ["updated_at", "2023-11-26 09:05:36.891360"]]
  â†³ app/controllers/api/wallets_controller.rb:68:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:71:in `block in transfer'
  [1m[36mTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 50.0], ["description", "Transfer from wallet3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:05:36.915002"], ["updated_at", "2023-11-26 09:05:36.915002"]]
  â†³ app/controllers/api/wallets_controller.rb:73:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `transfer'
Completed 200 OK in 61ms (Views: 0.6ms | ActiveRecord: 3.7ms | Allocations: 27150)


Started POST "/api/transfer" for ::1 at 2023-11-26 16:06:15 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "description"=>"Transfer to User id 8", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:85:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:66:in `block in transfer'
  [1m[36mWallet Load (1.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:66:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 50.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:06:15.746906"], ["updated_at", "2023-11-26 09:06:15.746906"]]
  â†³ app/controllers/api/wallets_controller.rb:68:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:71:in `block in transfer'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 50.0], ["description", "Transfer from wallet3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:06:15.752597"], ["updated_at", "2023-11-26 09:06:15.752597"]]
  â†³ app/controllers/api/wallets_controller.rb:73:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `transfer'
Completed 200 OK in 21ms (Views: 0.4ms | ActiveRecord: 2.8ms | Allocations: 5666)


Started POST "/api/transfer" for ::1 at 2023-11-26 16:09:57 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:85:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:66:in `block in transfer'
  [1m[36mWallet Load (0.6ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:66:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 50.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:09:57.416912"], ["updated_at", "2023-11-26 09:09:57.416912"]]
  â†³ app/controllers/api/wallets_controller.rb:68:in `block in transfer'
  [1m[36mWallet Load (0.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:71:in `block in transfer'
  [1m[36mTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 50.0], ["description", "Transfer from wallet3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:09:57.419206"], ["updated_at", "2023-11-26 09:09:57.419206"]]
  â†³ app/controllers/api/wallets_controller.rb:73:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `transfer'
Completed 200 OK in 94ms (Views: 0.3ms | ActiveRecord: 1.5ms | Allocations: 5662)


Started POST "/api/transfer" for ::1 at 2023-11-26 16:10:07 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"5000", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:85:in `set_user'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:66:in `block in transfer'
  [1m[36mWallet Load (0.9ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:66:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:65:in `transfer'
Completed 422 Unprocessable Entity in 7ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 2662)


Started POST "/api/transfer" for ::1 at 2023-11-26 16:15:02 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"5000", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
Completed 422 Unprocessable Entity in 31ms (Views: 0.1ms | ActiveRecord: 2.7ms | Allocations: 19841)


Started POST "/api/transfer" for ::1 at 2023-11-26 16:15:28 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:67:in `transfer'
  [1m[36mTransaction Create (1.8ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 50.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:15:28.524305"], ["updated_at", "2023-11-26 09:15:28.524305"]]
  â†³ app/controllers/api/wallets_controller.rb:67:in `transfer'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:67:in `transfer'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:70:in `transfer'
Completed 500 Internal Server Error in 22ms (ActiveRecord: 2.9ms | Allocations: 8012)


  
TypeError (no implicit conversion of Integer into String):
  
app/controllers/api/wallets_controller.rb:72:in `+'
app/controllers/api/wallets_controller.rb:72:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 16:23:01 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:65:in `block in transfer'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 2.5ms | Allocations: 14130)


  
ActiveRecord::TransactionIsolationError (SQLite3 only supports the `read_uncommitted` transaction isolation level):
  
app/controllers/api/wallets_controller.rb:65:in `block in transfer'
app/controllers/api/wallets_controller.rb:64:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 16:27:36 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
Completed 500 Internal Server Error in 26ms (ActiveRecord: 3.5ms | Allocations: 13494)


  
StandardError (You need to enable the shared-cache mode in SQLite mode before attempting to change the transaction isolation level):
  
app/controllers/api/wallets_controller.rb:65:in `block in transfer'
app/controllers/api/wallets_controller.rb:64:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 16:35:59 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
Completed 500 Internal Server Error in 22ms (ActiveRecord: 1.6ms | Allocations: 12888)


  
ActiveRecord::TransactionIsolationError (SQLite3 only supports the `read_uncommitted` transaction isolation level):
  
app/controllers/api/wallets_controller.rb:65:in `block in transfer'
app/controllers/api/wallets_controller.rb:64:in `transfer'
Started POST "/api/transfer" for ::1 at 2023-11-26 16:41:55 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 50.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:41:55.261958"], ["updated_at", "2023-11-26 09:41:55.261958"]]
  â†³ app/controllers/api/wallets_controller.rb:67:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:70:in `block in transfer'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 50.0], ["description", "Transfer from wallet3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:41:55.280734"], ["updated_at", "2023-11-26 09:41:55.280734"]]
  â†³ app/controllers/api/wallets_controller.rb:72:in `block in transfer'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 200 OK in 65ms (Views: 0.4ms | ActiveRecord: 8.0ms | Allocations: 26609)


Started POST "/api/transfer" for ::1 at 2023-11-26 16:42:32 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.8ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 50.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:42:32.738925"], ["updated_at", "2023-11-26 09:42:32.738925"]]
  â†³ app/controllers/api/wallets_controller.rb:67:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:70:in `block in transfer'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 50.0], ["description", "Transfer from wallet3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:42:32.742034"], ["updated_at", "2023-11-26 09:42:32.742034"]]
  â†³ app/controllers/api/wallets_controller.rb:72:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 1.9ms | Allocations: 5663)


Started POST "/api/transfer" for ::1 at 2023-11-26 16:45:16 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"50", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 50.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:45:16.253850"], ["updated_at", "2023-11-26 09:45:16.253850"]]
  â†³ app/controllers/api/wallets_controller.rb:67:in `block in transfer'
  [1m[36mWallet Load (0.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:70:in `block in transfer'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 50.0], ["description", "Transfer from wallet3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:45:16.280836"], ["updated_at", "2023-11-26 09:45:16.280836"]]
  â†³ app/controllers/api/wallets_controller.rb:72:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 200 OK in 76ms (Views: 0.4ms | ActiveRecord: 4.5ms | Allocations: 27097)


Started POST "/api/transfer" for ::1 at 2023-11-26 16:45:21 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"1", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (1.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 1.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:45:21.498142"], ["updated_at", "2023-11-26 09:45:21.498142"]]
  â†³ app/controllers/api/wallets_controller.rb:67:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:70:in `block in transfer'
  [1m[36mTransaction Create (1.0ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 1.0], ["description", "Transfer from wallet3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:45:21.510554"], ["updated_at", "2023-11-26 09:45:21.510554"]]
  â†³ app/controllers/api/wallets_controller.rb:72:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 200 OK in 32ms (Views: 0.4ms | ActiveRecord: 3.0ms | Allocations: 5668)


Started POST "/api/deposit" for ::1 at 2023-11-26 16:45:31 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"100.00", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
  [1m[36mTransaction Create (1.4ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 100.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-26 09:45:31.819021"], ["updated_at", "2023-11-26 09:45:31.819021"]]
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
Completed 201 Created in 6ms (Views: 0.3ms | ActiveRecord: 1.7ms | Allocations: 1975)


Started POST "/api/transfer" for ::1 at 2023-11-26 16:45:39 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"9", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (1.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 9.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:45:39.685242"], ["updated_at", "2023-11-26 09:45:39.685242"]]
  â†³ app/controllers/api/wallets_controller.rb:67:in `block in transfer'
  [1m[36mWallet Load (0.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:70:in `block in transfer'
  [1m[36mTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 9.0], ["description", "Transfer from wallet3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:45:39.687540"], ["updated_at", "2023-11-26 09:45:39.687540"]]
  â†³ app/controllers/api/wallets_controller.rb:72:in `block in transfer'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 200 OK in 18ms (Views: 0.4ms | ActiveRecord: 1.9ms | Allocations: 5665)


Started POST "/api/transfer" for ::1 at 2023-11-26 16:45:48 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (1.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 10.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:45:48.020860"], ["updated_at", "2023-11-26 09:45:48.020860"]]
  â†³ app/controllers/api/wallets_controller.rb:67:in `block in transfer'
  [1m[36mWallet Load (0.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:70:in `block in transfer'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 10.0], ["description", "Transfer from wallet3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:45:48.022995"], ["updated_at", "2023-11-26 09:45:48.022995"]]
  â†³ app/controllers/api/wallets_controller.rb:72:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 200 OK in 17ms (Views: 0.6ms | ActiveRecord: 2.4ms | Allocations: 5661)


Started POST "/api/deposit" for ::1 at 2023-11-26 16:45:57 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"1000", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
  [1m[36mTransaction Create (0.9ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 1000.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-26 09:45:57.255183"], ["updated_at", "2023-11-26 09:45:57.255183"]]
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
Completed 201 Created in 6ms (Views: 1.0ms | ActiveRecord: 1.2ms | Allocations: 1967)


Started POST "/api/transfer" for ::1 at 2023-11-26 16:46:02 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (1.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 10.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:46:02.917040"], ["updated_at", "2023-11-26 09:46:02.917040"]]
  â†³ app/controllers/api/wallets_controller.rb:67:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:70:in `block in transfer'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 10.0], ["description", "Transfer from wallet3"], ["message", "Happy birdth day"], ["created_at", "2023-11-26 09:46:02.920510"], ["updated_at", "2023-11-26 09:46:02.920510"]]
  â†³ app/controllers/api/wallets_controller.rb:72:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:64:in `transfer'
Completed 200 OK in 21ms (Views: 0.8ms | ActiveRecord: 2.5ms | Allocations: 5661)


Started POST "/api/login?username=sang&password=[FILTERED]" for ::1 at 2023-11-27 10:35:56 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
Zeitwerk::NameError (expected file /Users/sangngo/Works/Projects2/internal_wallet/app/controllers/api/sessions_controller.rb to define constant Api::SessionsController, but didn't):
  
zeitwerk (2.6.12) lib/zeitwerk/loader/callbacks.rb:33:in `on_file_autoloaded'
zeitwerk (2.6.12) lib/zeitwerk/kernel.rb:31:in `require'
activesupport (7.1.2) lib/active_support/inflector/methods.rb:290:in `const_get'
activesupport (7.1.2) lib/active_support/inflector/methods.rb:290:in `constantize'
activesupport (7.1.2) lib/active_support/core_ext/string/inflections.rb:74:in `constantize'
actionpack (7.1.2) lib/action_dispatch/http/request.rb:90:in `controller_class_for'
actionpack (7.1.2) lib/action_dispatch/request/utils.rb:100:in `action_encoding_template'
actionpack (7.1.2) lib/action_dispatch/request/utils.rb:85:in `encode'
actionpack (7.1.2) lib/action_dispatch/request/utils.rb:45:in `set_binary_encoding'
actionpack (7.1.2) lib/action_dispatch/http/parameters.rb:68:in `path_parameters='
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:48:in `block in serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
rack (3.0.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.8) lib/rack/etag.rb:29:in `call'
rack (3.0.8) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.8) lib/rack/head.rb:15:in `call'
actionpack (7.1.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (7.1.2) lib/active_record/migration.rb:654:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started POST "/api/login?username=sang&password=[FILTERED]" for ::1 at 2023-11-27 10:36:40 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "username"=>"sang", "password"=>"[FILTERED]"}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 572)


  
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
actionpack (7.1.2) lib/action_controller/metal/request_forgery_protection.rb:293:in `handle_unverified_request'
actionpack (7.1.2) lib/action_controller/metal/request_forgery_protection.rb:388:in `handle_unverified_request'
actionpack (7.1.2) lib/action_controller/metal/request_forgery_protection.rb:377:in `verify_authenticity_token'
activesupport (7.1.2) lib/active_support/callbacks.rb:403:in `block in make_lambda'
activesupport (7.1.2) lib/active_support/callbacks.rb:202:in `block (2 levels) in halting'
actionpack (7.1.2) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (7.1.2) lib/active_support/callbacks.rb:203:in `block in halting'
activesupport (7.1.2) lib/active_support/callbacks.rb:598:in `block in invoke_before'
activesupport (7.1.2) lib/active_support/callbacks.rb:598:in `each'
activesupport (7.1.2) lib/active_support/callbacks.rb:598:in `invoke_before'
activesupport (7.1.2) lib/active_support/callbacks.rb:119:in `block in run_callbacks'
activesupport (7.1.2) lib/active_support/callbacks.rb:141:in `run_callbacks'
actionpack (7.1.2) lib/abstract_controller/callbacks.rb:258:in `process_action'
actionpack (7.1.2) lib/action_controller/metal/rescue.rb:25:in `process_action'
actionpack (7.1.2) lib/action_controller/metal/instrumentation.rb:74:in `block in process_action'
activesupport (7.1.2) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.1.2) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (7.1.2) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.1.2) lib/action_controller/metal/instrumentation.rb:73:in `process_action'
actionpack (7.1.2) lib/action_controller/metal/params_wrapper.rb:261:in `process_action'
activerecord (7.1.2) lib/active_record/railties/controller_runtime.rb:32:in `process_action'
actionpack (7.1.2) lib/abstract_controller/base.rb:160:in `process'
actionview (7.1.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
rack (3.0.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.8) lib/rack/etag.rb:29:in `call'
rack (3.0.8) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.8) lib/rack/head.rb:15:in `call'
actionpack (7.1.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (7.1.2) lib/active_record/migration.rb:654:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started POST "/api/login?username=sang&password=[FILTERED]" for ::1 at 2023-11-27 10:36:51 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "username"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.9ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."username" = ? LIMIT ?[0m  [["username", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
Completed 500 Internal Server Error in 57ms (ActiveRecord: 43.6ms | Allocations: 11614)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: system_users.username):
  
Started POST "/api/login?username=sang&password=[FILTERED]" for ::1 at 2023-11-27 10:37:36 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "username"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.7ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
Completed 500 Internal Server Error in 32ms (ActiveRecord: 2.2ms | Allocations: 10510)


  
NoMethodError (undefined method `authenticate' for #<SystemUser id: 1, user_name: "sang", password: [FILTERED], created_at: nil, updated_at: nil>):
  
app/controllers/api/sessions_controller.rb:6:in `create'
Started POST "/api/login?username=sang&password=[FILTERED]" for ::1 at 2023-11-27 10:38:54 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "username"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.8ms | Allocations: 5020)


  
NoMethodError (undefined method `authenticate' for #<SystemUser id: 1, user_name: "sang", password: [FILTERED], created_at: nil, updated_at: nil>):
  
app/controllers/api/sessions_controller.rb:6:in `create'
Started POST "/api/login?username=sang&password=[FILTERED]" for ::1 at 2023-11-27 10:39:52 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "username"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 1.6ms | Allocations: 4970)


  
NoMethodError (undefined method `authenticate' for #<SystemUser id: 1, user_name: "sang", password: [FILTERED], created_at: nil, updated_at: nil>):
  
app/controllers/api/sessions_controller.rb:6:in `create'
Started POST "/api/login?username=sang&password=[FILTERED]" for ::1 at 2023-11-27 10:40:32 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "username"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? AND "system_users"."password" = ? LIMIT ?[0m  [["user_name", "sang"], ["password", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:9:in `authenticate'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 5392)


Started POST "/api/login?username=sang&password=[FILTERED]" for ::1 at 2023-11-27 10:43:00 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "username"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? AND "system_users"."password" = ? LIMIT ?[0m  [["user_name", "sang"], ["password", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:9:in `authenticate'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 2.0ms | Allocations: 5387)


  
SystemExit (#<ActionDispatch::Request::Session:0x24770 not yet loaded>):
  
app/controllers/api/sessions_controller.rb:7:in `abort'
app/controllers/api/sessions_controller.rb:7:in `create'
Started POST "/api/login?username=sang&password=[FILTERED]" for ::1 at 2023-11-27 10:44:15 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "username"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? AND "system_users"."password" = ? LIMIT ?[0m  [["user_name", "sang"], ["password", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:9:in `authenticate'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.8ms | Allocations: 5598)


  
SystemExit (1):
  
app/controllers/api/sessions_controller.rb:8:in `abort'
app/controllers/api/sessions_controller.rb:8:in `create'
Started POST "/api/login?username=sang&password=[FILTERED]" for ::1 at 2023-11-27 10:44:33 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "username"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? AND "system_users"."password" = ? LIMIT ?[0m  [["user_name", "sang"], ["password", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:9:in `authenticate'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.7ms | Allocations: 5694)


  
SystemExit (#<ActionDispatch::Request::Session:0x0000000110fb0430 @by=#<ActionDispatch::Session::CookieStore:0x000000011056b470 @app=#<ActionDispatch::ContentSecurityPolicy::Middleware:0x0000000110585ca8 @app=#<ActionDispatch::PermissionsPolicy::Middleware:0x0000000110585d48 @app=#<Rack::Head:0x0000000110585de8 @app=#<Rack::ConditionalGet:0x0000000110585e88 @app=#<Rack::ETag:0x0000000110585f78 @app=#<Rack::TempfileReaper:0x0000000110586018 @app=#<ActionDispatch::Routing::RouteSet:0x000000011009f658>>, @cache_control="max-age=0, private, must-revalidate", @no_cache_control="no-cache">>>>>, @default_options={:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false}, @key="_internal_wallet_session", @cookie_only=true, @same_site=#<Proc:0x000000011058b720 /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/session/cookie_store.rb:61>>, @req=#<ActionDispatch::Request POST "http://localhost:3000/api/login?username=sang&password=password" for ::1>, @delegate={"session_id"=>"9943be7b46a90264c46e36d146e41ffd", "user_id"=>1}, @loaded=true, @exists=true, @enabled=true, @id_was="9943be7b46a90264c46e36d146e41ffd", @id_was_initialized=true>):
  
app/controllers/api/sessions_controller.rb:8:in `abort'
app/controllers/api/sessions_controller.rb:8:in `create'
Started POST "/api/login?username=sang&password=[FILTERED]" for ::1 at 2023-11-27 10:47:07 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "username"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? AND "system_users"."password" = ? LIMIT ?[0m  [["user_name", "sang"], ["password", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:9:in `authenticate'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 1.6ms | Allocations: 5401)


  
SystemExit (#<ActionDispatch::Request::Session:0x2fa30 not yet loaded>):
  
app/controllers/api/sessions_controller.rb:8:in `abort'
app/controllers/api/sessions_controller.rb:8:in `create'
Started POST "/api/login?username=sang&password=[FILTERED]" for ::1 at 2023-11-27 11:13:16 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "username"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."username" = ? LIMIT ?[0m  [["type", "User"], ["username", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
Completed 500 Internal Server Error in 26ms (ActiveRecord: 8.8ms | Allocations: 4343)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: entities.username):
  
Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-27 11:13:52 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "user_name"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.6ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_namename" = ? LIMIT ?[0m  [["user_namename", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 2.0ms | Allocations: 3235)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: system_users.user_namename):
  
Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-27 11:14:01 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "user_name"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 1.9ms | Allocations: 4956)


  
NoMethodError (undefined method `authenticate' for #<SystemUser id: 1, user_name: "sang", password: [FILTERED], created_at: nil, updated_at: nil>):
  
app/controllers/api/sessions_controller.rb:7:in `create'
Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-27 11:16:06 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "user_name"=>"sang", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 38ms (ActiveRecord: 0.0ms | Allocations: 1012)


  
LoadError (cannot load such file -- bcrypt):
  
app/models/system_user.rb:2:in `<class:SystemUser>'
app/models/system_user.rb:1:in `<main>'
app/controllers/api/sessions_controller.rb:5:in `create'
Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-27 11:16:26 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "user_name"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.7ms | Allocations: 5028)


  
NoMethodError (undefined method `authenticate' for #<SystemUser id: 1, user_name: "sang", password: [FILTERED], created_at: nil, updated_at: nil>):
  
app/controllers/api/sessions_controller.rb:7:in `create'
Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-27 11:16:48 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "user_name"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.7ms | Allocations: 4949)


  
ArgumentError (wrong number of arguments (given 1, expected 2)):
  
app/models/system_user.rb:17:in `authenticate'
app/controllers/api/sessions_controller.rb:7:in `create'
Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-27 11:17:27 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "user_name"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.9ms | Allocations: 4974)


  
NoMethodError (undefined method `find_by' for #<SystemUser id: 1, user_name: "sang", password: [FILTERED], created_at: nil, updated_at: nil>):
  
app/models/system_user.rb:18:in `authenticate'
app/controllers/api/sessions_controller.rb:7:in `create'
Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-27 11:18:17 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "user_name"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.7ms | Allocations: 5036)


  
NoMethodError (undefined method `find_by' for #<SystemUser id: 1, user_name: "sang", password: [FILTERED], created_at: nil, updated_at: nil>):
  
app/models/system_user.rb:18:in `authenticate'
app/controllers/api/sessions_controller.rb:7:in `create'
Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-27 11:18:26 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "user_name"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.9ms | Allocations: 5038)


  
NameError (undefined local variable or method `this' for #<SystemUser id: 1, user_name: "sang", password: [FILTERED], created_at: nil, updated_at: nil>):
  
app/models/system_user.rb:18:in `authenticate'
app/controllers/api/sessions_controller.rb:7:in `create'
Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-27 11:18:40 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "user_name"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
  [1m[36mSystemUser Load (0.3ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."username" = ? LIMIT ?[0m  [["username", "sang"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.9ms | Allocations: 5961)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: system_users.username):
  
Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-27 11:18:52 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "user_name"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:5:in `create'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 5009)


Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-27 11:21:14 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "user_name"=>"sang", "password"=>"[FILTERED]"}
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 222)


Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-27 11:22:45 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4", "user_name"=>"sang", "password"=>"[FILTERED]"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:6:in `create'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 4878)


Started POST "/api/teams" for ::1 at 2023-11-27 11:22:56 +0700
Processing by Api::TeamsController#create as */*
  Parameters: {"team"=>{"name"=>"Team A", "description"=>"Team A of Company A"}}
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 195)


Started POST "/api/deposit" for ::1 at 2023-11-27 11:23:01 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"1000", "description"=>"Transfer from Bank account"}
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 211)


Started POST "/api/deposit" for ::1 at 2023-11-27 11:24:26 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"1000", "description"=>"Transfer from Bank account"}
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 115)


Started POST "/api/deposit" for ::1 at 2023-11-27 11:24:44 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"1000", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 17ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 6001)


Started POST "/api/deposit" for ::1 at 2023-11-27 11:25:15 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"1000", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.1ms | Allocations: 467)


Started POST "/api/deposit" for ::1 at 2023-11-27 11:25:24 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"1000", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.1ms | Allocations: 467)


Started POST "/api/deposit" for ::1 at 2023-11-27 11:25:39 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------685378253599213696602854
Content-Disposition: form-data; name="user_id"

7
----------------------------685378253599213696602854
Content-Disposition: form-data; name="amount"

1000
----------------------------685378253599213696602854
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------685378253599213696602854--

Processing by Api::WalletsController#deposit as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms | Allocations: 1149)


Started POST "/api/deposit" for ::1 at 2023-11-27 11:25:59 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------203937386436935195988932
Content-Disposition: form-data; name="user_id"

7
----------------------------203937386436935195988932
Content-Disposition: form-data; name="amount"

1000
----------------------------203937386436935195988932
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------203937386436935195988932--

Processing by Api::WalletsController#deposit as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 472)


  
SystemExit ("eyJ1c2VyX2lkIjoxLCJleHAiOjE3MDExNDUzNjV9\\n"):
  
app/controllers/application_controller.rb:9:in `abort'
app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
Started POST "/api/deposit" for ::1 at 2023-11-27 11:26:05 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------325744940089732982634482
Content-Disposition: form-data; name="user_id"

7
----------------------------325744940089732982634482
Content-Disposition: form-data; name="amount"

1000
----------------------------325744940089732982634482
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------325744940089732982634482--

Processing by Api::WalletsController#deposit as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 400)


  
SystemExit ("eyJ1c2VyX2lkIjoxLCJleHAiOjE3MDExNDUzNjV9\\n"):
  
app/controllers/application_controller.rb:9:in `abort'
app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
Started POST "/api/deposit" for ::1 at 2023-11-27 11:26:34 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------053874050630467421358521
Content-Disposition: form-data; name="user_id"

7
----------------------------053874050630467421358521
Content-Disposition: form-data; name="amount"

1000
----------------------------053874050630467421358521
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------053874050630467421358521--

Processing by Api::WalletsController#deposit as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 472)


  
SystemExit ("eyJ1c2VyX2lkIjoxLCJleHAiOjE3MDExNDUzNjV9\\n"):
  
app/controllers/application_controller.rb:9:in `abort'
app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
Started POST "/api/deposit" for ::1 at 2023-11-27 11:26:45 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------078581800416746692900740
Content-Disposition: form-data; name="user_id"

7
----------------------------078581800416746692900740
Content-Disposition: form-data; name="amount"

1000
----------------------------078581800416746692900740
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------078581800416746692900740--

Processing by Api::WalletsController#deposit as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 471)


  
SystemExit (eyJ1c2VyX2lkIjoxLCJleHAiOjE3MDExNDUzNjV9\n):
  
app/controllers/application_controller.rb:9:in `abort'
app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
Started POST "/api/deposit" for ::1 at 2023-11-27 11:26:52 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------884600889305881460018511
Content-Disposition: form-data; name="user_id"

7
----------------------------884600889305881460018511
Content-Disposition: form-data; name="amount"

1000
----------------------------884600889305881460018511
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------884600889305881460018511--

Processing by Api::WalletsController#deposit as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 479)


  
TypeError (no implicit conversion of ActionDispatch::Request into String):
  
app/controllers/application_controller.rb:9:in `abort'
app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
Started POST "/api/deposit" for ::1 at 2023-11-27 11:27:06 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------097464679343627894589153
Content-Disposition: form-data; name="user_id"

7
----------------------------097464679343627894589153
Content-Disposition: form-data; name="amount"

1000
----------------------------097464679343627894589153
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------097464679343627894589153--

Processing by Api::WalletsController#deposit as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 472)


  
SystemExit (test):
  
app/controllers/application_controller.rb:9:in `abort'
app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
Started POST "/api/deposit" for ::1 at 2023-11-27 11:27:51 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------156009669399688395337222
Content-Disposition: form-data; name="user_id"

7
----------------------------156009669399688395337222
Content-Disposition: form-data; name="amount"

1000
----------------------------156009669399688395337222
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------156009669399688395337222--

Processing by Api::WalletsController#deposit as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 471)


  
SystemExit (eyJ1c2VyX2lkIjoxLCJleHAiOjE3MDExNDUzNjV9\n):
  
app/controllers/application_controller.rb:10:in `abort'
app/controllers/application_controller.rb:10:in `authenticate_user_from_token!'
Started POST "/api/deposit" for ::1 at 2023-11-27 11:28:30 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------258710599975223760192817
Content-Disposition: form-data; name="user_id"

7
----------------------------258710599975223760192817
Content-Disposition: form-data; name="amount"

1000
----------------------------258710599975223760192817
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------258710599975223760192817--

Processing by Api::WalletsController#deposit as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 472)


  
SystemExit (test):
  
app/controllers/application_controller.rb:9:in `abort'
app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
Started POST "/api/deposit" for ::1 at 2023-11-27 11:28:43 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------986946980412453159179176
Content-Disposition: form-data; name="user_id"

7
----------------------------986946980412453159179176
Content-Disposition: form-data; name="amount"

1000
----------------------------986946980412453159179176
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------986946980412453159179176--

Processing by Api::WalletsController#deposit as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 472)


  
SystemExit (test):
  
app/controllers/application_controller.rb:9:in `abort'
app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
Started POST "/api/deposit" for ::1 at 2023-11-27 11:29:13 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------997113557431333431535337
Content-Disposition: form-data; name="user_id"

7
----------------------------997113557431333431535337
Content-Disposition: form-data; name="amount"

1000
----------------------------997113557431333431535337
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------997113557431333431535337--

Processing by Api::WalletsController#deposit as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 471)


  
SystemExit (eyJ1c2VyX2lkIjoxLCJleHAiOjE3MDExNDUzNjV9\n):
  
app/controllers/application_controller.rb:10:in `abort'
app/controllers/application_controller.rb:10:in `authenticate_user_from_token!'
Started POST "/api/deposit" for ::1 at 2023-11-27 11:43:38 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------676462157612950814823493
Content-Disposition: form-data; name="user_id"

7
----------------------------676462157612950814823493
Content-Disposition: form-data; name="amount"

1000
----------------------------676462157612950814823493
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------676462157612950814823493--

Processing by Api::WalletsController#deposit as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 481)


  
TypeError (no implicit conversion of Hash into String):
  
app/controllers/application_controller.rb:10:in `abort'
app/controllers/application_controller.rb:10:in `authenticate_user_from_token!'
Started POST "/api/deposit" for ::1 at 2023-11-27 11:44:09 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------404277639991701506735280
Content-Disposition: form-data; name="user_id"

7
----------------------------404277639991701506735280
Content-Disposition: form-data; name="amount"

1000
----------------------------404277639991701506735280
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------404277639991701506735280--

Processing by Api::WalletsController#deposit as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 484)


  
SystemExit ({"user_id"=>1, "exp"=>1701145365}):
  
app/controllers/application_controller.rb:10:in `abort'
app/controllers/application_controller.rb:10:in `authenticate_user_from_token!'
Started POST "/api/deposit" for ::1 at 2023-11-27 11:44:52 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------849765172837618165036020
Content-Disposition: form-data; name="user_id"

7
----------------------------849765172837618165036020
Content-Disposition: form-data; name="amount"

1000
----------------------------849765172837618165036020
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------849765172837618165036020--

Processing by Api::WalletsController#deposit as */*
  [1m[36mSystemUser Load (0.2ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authenticate_user_from_token!'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 3.6ms | Allocations: 5090)


  
NoMethodError (undefined method `sign_in' for #<Api::WalletsController:0x0000000008dc98>):
  
app/controllers/application_controller.rb:13:in `authenticate_user_from_token!'
Started POST "/api/deposit" for ::1 at 2023-11-27 13:22:22 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------857234529296165930603760
Content-Disposition: form-data; name="user_id"

7
----------------------------857234529296165930603760
Content-Disposition: form-data; name="amount"

1000
----------------------------857234529296165930603760
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------857234529296165930603760--

Processing by Api::WalletsController#deposit as */*
  [1m[36mSystemUser Load (1.2ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authenticate_user_from_token!'
Completed 400 Bad Request in 12ms (ActiveRecord: 2.0ms | Allocations: 6565)


  
ActionDispatch::Http::Parameters::ParseError (Error occurred while parsing request parameters):
  
app/controllers/api/wallets_controller.rb:84:in `set_user'
Started POST "/api/deposit" for ::1 at 2023-11-27 13:23:18 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------635846078058091424000863
Content-Disposition: form-data; name="user_id"

7
----------------------------635846078058091424000863
Content-Disposition: form-data; name="amount"

1000
----------------------------635846078058091424000863
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------635846078058091424000863--

Processing by Api::WalletsController#deposit as */*
Completed 400 Bad Request in 5ms (ActiveRecord: 0.0ms | Allocations: 2368)


  
ActionDispatch::Http::Parameters::ParseError (Error occurred while parsing request parameters):
  
app/controllers/api/wallets_controller.rb:84:in `set_user'
Started POST "/api/deposit" for ::1 at 2023-11-27 13:24:00 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------932554460368989047662372
Content-Disposition: form-data; name="user_id"

7
----------------------------932554460368989047662372
Content-Disposition: form-data; name="amount"

1000
----------------------------932554460368989047662372
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------932554460368989047662372--

Processing by Api::WalletsController#deposit as */*
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 733)


  
ActionDispatch::Http::Parameters::ParseError (Error occurred while parsing request parameters):
  
app/controllers/api/wallets_controller.rb:84:in `set_user'
Started POST "/api/deposit" for ::1 at 2023-11-27 13:25:05 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------504607730986392263092620
Content-Disposition: form-data; name="user_id"

7
----------------------------504607730986392263092620
Content-Disposition: form-data; name="amount"

1000
----------------------------504607730986392263092620
Content-Disposition: form-data; name="description"

Transfer from Bank account
----------------------------504607730986392263092620--

Processing by Api::WalletsController#deposit as */*
Completed 400 Bad Request in 4ms (ActiveRecord: 0.0ms | Allocations: 2368)


  
ActionDispatch::Http::Parameters::ParseError (Error occurred while parsing request parameters):
  
app/controllers/api/wallets_controller.rb:84:in `set_user'
Started POST "/api/withdraw" for ::1 at 2023-11-27 13:25:11 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mWallet Load (2.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:37:in `withdraw'
  [1m[36mTransaction Sum (3.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:43:in `withdraw'
  [1m[36mTransaction Create (4.9ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 10.0], ["description", "Withdraw in ATM"], ["message", nil], ["created_at", "2023-11-27 06:25:12.088298"], ["updated_at", "2023-11-27 06:25:12.088298"]]
  â†³ app/controllers/api/wallets_controller.rb:43:in `withdraw'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:43:in `withdraw'
Completed 201 Created in 119ms (Views: 3.2ms | ActiveRecord: 15.0ms | Allocations: 34592)


Started POST "/api/withdraw" for ::1 at 2023-11-27 13:25:20 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "description"=>"Withdraw in ATM"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:37:in `withdraw'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:43:in `withdraw'
  [1m[36mTransaction Create (1.3ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 10.0], ["description", "Withdraw in ATM"], ["message", nil], ["created_at", "2023-11-27 06:25:20.589480"], ["updated_at", "2023-11-27 06:25:20.589480"]]
  â†³ app/controllers/api/wallets_controller.rb:43:in `withdraw'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:43:in `withdraw'
Completed 201 Created in 11ms (Views: 0.4ms | ActiveRecord: 1.8ms | Allocations: 3502)


Started POST "/api/deposit" for ::1 at 2023-11-27 13:25:30 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"1000", "description"=>"Transfer from Bank account"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
  [1m[36mTransaction Create (1.6ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 1000.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-27 06:25:30.723832"], ["updated_at", "2023-11-27 06:25:30.723832"]]
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
Completed 201 Created in 11ms (Views: 0.6ms | ActiveRecord: 2.7ms | Allocations: 1970)


Started POST "/api/deposit" for ::1 at 2023-11-27 13:25:50 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"1000", "description"=>"Transfer from Bank account"}
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 215)


Started POST "/api/deposit" for ::1 at 2023-11-27 13:26:01 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"1000", "description"=>"Transfer from Bank account"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
  [1m[36mTransaction Create (1.7ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 1000.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-27 06:26:01.332771"], ["updated_at", "2023-11-27 06:26:01.332771"]]
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
Completed 201 Created in 51ms (Views: 0.7ms | ActiveRecord: 6.7ms | Allocations: 21584)


Started POST "/api/deposit" for ::1 at 2023-11-27 13:26:27 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"1000", "description"=>"Transfer from Bank account"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:12:in `authenticate_user_from_token!'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 1.7ms | Allocations: 5233)


  
SystemExit (test ok):
  
app/controllers/application_controller.rb:14:in `abort'
app/controllers/application_controller.rb:14:in `authenticate_user_from_token!'
Started POST "/api/withdraw" for ::1 at 2023-11-27 13:34:01 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "description"=>"Withdraw in ATM"}
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 215)


Started POST "/api/withdraw" for ::1 at 2023-11-27 13:34:16 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "description"=>"Withdraw in ATM"}
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 115)


Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-27 13:35:26 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_name"=>"sang", "password"=>"[FILTERED]", "session"=>{}}
  [1m[36mSystemUser Load (0.9ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:6:in `create'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 4511)


Started POST "/api/deposit" for ::1 at 2023-11-27 13:36:01 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"1000", "description"=>"Transfer from Bank account"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 498)


  
JSON::ParserError (unexpected token at 'È\Ù\—ÚYŽŒK™^ŽŒMÌLMLÍ_g'):
  
app/controllers/application_controller.rb:18:in `decode_token'
app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
Started POST "/api/deposit" for ::1 at 2023-11-27 13:36:16 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"7", "amount"=>"1000", "description"=>"Transfer from Bank account"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
  [1m[36mTransaction Create (2.0ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 3], ["amount", 1000.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-27 06:36:16.666087"], ["updated_at", "2023-11-27 06:36:16.666087"]]
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
Completed 201 Created in 28ms (Views: 0.4ms | ActiveRecord: 3.4ms | Allocations: 17743)


Started POST "/api/login?user_name=test&password=[FILTERED]" for ::1 at 2023-11-27 13:37:00 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_name"=>"test", "password"=>"[FILTERED]", "session"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:6:in `create'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 755)


Started POST "/api/login?user_name=test&password=[FILTERED]" for ::1 at 2023-11-27 13:37:34 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_name"=>"test", "password"=>"[FILTERED]", "session"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:6:in `create'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 753)


Started POST "/api/login?user_name=test&password=[FILTERED]" for ::1 at 2023-11-27 13:37:37 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_name"=>"test", "password"=>"[FILTERED]", "session"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:6:in `create'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 753)


Started POST "/api/login?user_name=test&password=[FILTERED]" for ::1 at 2023-11-27 13:37:38 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_name"=>"test", "password"=>"[FILTERED]", "session"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:6:in `create'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 755)


Started POST "/api/login?user_name=test&password=[FILTERED]" for ::1 at 2023-11-27 13:37:40 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_name"=>"test", "password"=>"[FILTERED]", "session"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:6:in `create'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 754)


Started POST "/api/login?user_name=test&password=[FILTERED]" for ::1 at 2023-11-27 13:37:42 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_name"=>"test", "password"=>"[FILTERED]", "session"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:6:in `create'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 754)


Started POST "/api/login?user_name=test&password=[FILTERED]" for ::1 at 2023-11-27 13:37:44 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_name"=>"test", "password"=>"[FILTERED]", "session"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:6:in `create'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 754)


Started POST "/api/withdraw" for ::1 at 2023-11-27 13:38:03 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "description"=>"Withdraw in ATM"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:84:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:37:in `withdraw'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:43:in `withdraw'
  [1m[36mTransaction Create (1.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 10.0], ["description", "Withdraw in ATM"], ["message", nil], ["created_at", "2023-11-27 06:38:03.150369"], ["updated_at", "2023-11-27 06:38:03.150369"]]
  â†³ app/controllers/api/wallets_controller.rb:43:in `withdraw'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:43:in `withdraw'
Completed 201 Created in 33ms (Views: 0.3ms | ActiveRecord: 2.2ms | Allocations: 13723)


Started POST "/api/login?user_name=test3&password=[FILTERED]" for ::1 at 2023-11-27 13:46:52 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_name"=>"test3", "password"=>"[FILTERED]", "session"=>{}}
  [1m[36mSystemUser Load (1.6ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test3"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:6:in `create'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "test3"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 2.2ms | Allocations: 4453)


Started POST "/api/users" for ::1 at 2023-11-27 13:47:21 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 195)


Started POST "/api/users" for ::1 at 2023-11-27 13:47:27 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:24:in `create'
  [1m[36mWallet Create (1.6ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr"], ["created_at", "2023-11-27 06:47:27.171757"], ["updated_at", "2023-11-27 06:47:27.171757"]]
  â†³ app/controllers/api/users_controller.rb:24:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:24:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:29:in `create'
  [1m[36mWallet Load (0.8ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:29:in `create'
  [1m[36mSystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:29:in `create'
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "entities" ("wallet_id", "system_user_id", "type", "name", "birth_date", "description", "symbol", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["wallet_id", 5], ["system_user_id", 3], ["type", "User"], ["name", "Sang mr"], ["birth_date", "1990-01-01"], ["description", nil], ["symbol", nil], ["created_at", "2023-11-27 06:47:27.179850"], ["updated_at", "2023-11-27 06:47:27.179850"]]
  â†³ app/controllers/api/users_controller.rb:29:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:29:in `create'
Completed 201 Created in 33ms (Views: 0.9ms | ActiveRecord: 3.5ms | Allocations: 23416)


Started POST "/api/users" for ::1 at 2023-11-27 14:10:48 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr3", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (1.7ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:22:in `create'
  [1m[36mWallet Create (1.3ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr3"], ["created_at", "2023-11-27 07:10:48.843736"], ["updated_at", "2023-11-27 07:10:48.843736"]]
  â†³ app/controllers/api/users_controller.rb:22:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:22:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:29:in `create'
  [1m[36mWallet Load (0.7ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:29:in `create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:29:in `create'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "entities" ("wallet_id", "system_user_id", "type", "name", "birth_date", "description", "symbol", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["wallet_id", 6], ["system_user_id", 3], ["type", "User"], ["name", "Sang mr3"], ["birth_date", "1990-01-01"], ["description", nil], ["symbol", nil], ["created_at", "2023-11-27 07:10:48.851873"], ["updated_at", "2023-11-27 07:10:48.851873"]]
  â†³ app/controllers/api/users_controller.rb:29:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:29:in `create'
Completed 201 Created in 60ms (Views: 0.4ms | ActiveRecord: 5.4ms | Allocations: 22826)


Started POST "/api/users" for ::1 at 2023-11-27 14:15:36 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr3", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:22:in `create'
  [1m[36mWallet Create (1.6ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr3"], ["created_at", "2023-11-27 07:15:36.365121"], ["updated_at", "2023-11-27 07:15:36.365121"]]
  â†³ app/controllers/api/users_controller.rb:22:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:22:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:30:in `create'
  [1m[36mWallet Load (1.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:30:in `create'
  [1m[36mSystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:30:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/users_controller.rb:30:in `create'
Completed 201 Created in 47ms (Views: 0.5ms | ActiveRecord: 5.3ms | Allocations: 23144)


Started POST "/api/users" for ::1 at 2023-11-27 14:16:29 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr3", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:22:in `create'
  [1m[36mWallet Create (1.2ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr3"], ["created_at", "2023-11-27 07:16:29.039441"], ["updated_at", "2023-11-27 07:16:29.039441"]]
  â†³ app/controllers/api/users_controller.rb:22:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:22:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:30:in `create'
  [1m[36mWallet Load (0.9ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:30:in `create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:30:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/users_controller.rb:30:in `create'
Completed 201 Created in 9ms (Views: 0.3ms | ActiveRecord: 2.5ms | Allocations: 4764)


Started POST "/api/users" for ::1 at 2023-11-27 14:17:36 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr3", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:22:in `block in create'
  [1m[36mWallet Create (1.1ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr3"], ["created_at", "2023-11-27 07:17:36.479228"], ["updated_at", "2023-11-27 07:17:36.479228"]]
  â†³ app/controllers/api/users_controller.rb:22:in `block in create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:30:in `block in create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:30:in `block in create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:21:in `create'
Completed 201 Created in 31ms (Views: 0.3ms | ActiveRecord: 3.9ms | Allocations: 22188)


Started POST "/api/users" for ::1 at 2023-11-27 14:18:18 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr3", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:22:in `block in create'
  [1m[36mWallet Create (0.8ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr3"], ["created_at", "2023-11-27 07:18:18.279392"], ["updated_at", "2023-11-27 07:18:18.279392"]]
  â†³ app/controllers/api/users_controller.rb:22:in `block in create'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:30:in `block in create'
  [1m[36mSystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:30:in `block in create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:21:in `create'
Completed 201 Created in 32ms (Views: 0.3ms | ActiveRecord: 4.4ms | Allocations: 22143)


Started POST "/api/users" for ::1 at 2023-11-27 14:20:26 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr3", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.2ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:22:in `block in create'
  [1m[36mWallet Create (1.5ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr3"], ["created_at", "2023-11-27 07:20:26.781106"], ["updated_at", "2023-11-27 07:20:26.781106"]]
  â†³ app/controllers/api/users_controller.rb:22:in `block in create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:30:in `block in create'
  [1m[36mSystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:30:in `block in create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:21:in `create'
Completed 201 Created in 72ms (Views: 0.3ms | ActiveRecord: 10.0ms | Allocations: 22142)


Started POST "/api/users" for ::1 at 2023-11-27 14:26:42 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr3", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.9ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Create (1.5ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr3"], ["created_at", "2023-11-27 07:26:42.471364"], ["updated_at", "2023-11-27 07:26:42.471364"]]
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mSystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/users_controller.rb:10:in `create'
No template found for Api::UsersController#create, rendering head :no_content
Completed 204 No Content in 31ms (ActiveRecord: 3.2ms | Allocations: 21503)


Started POST "/api/users" for ::1 at 2023-11-27 14:28:35 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr3", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Create (0.9ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr3"], ["created_at", "2023-11-27 07:28:35.837123"], ["updated_at", "2023-11-27 07:28:35.837123"]]
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Load (0.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mSystemUser Load (0.2ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/users_controller.rb:10:in `create'
No template found for Api::UsersController#create, rendering head :no_content
Completed 204 No Content in 32ms (ActiveRecord: 1.3ms | Allocations: 4073)


Started POST "/api/users" for ::1 at 2023-11-27 14:32:00 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr3", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Create (0.9ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr3"], ["created_at", "2023-11-27 07:32:00.839017"], ["updated_at", "2023-11-27 07:32:00.839017"]]
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "entities" ("wallet_id", "system_user_id", "type", "name", "birth_date", "description", "symbol", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["wallet_id", 12], ["system_user_id", 3], ["type", "User"], ["name", "Sang mr3"], ["birth_date", "1990-01-01"], ["description", nil], ["symbol", nil], ["created_at", "2023-11-27 07:32:00.846285"], ["updated_at", "2023-11-27 07:32:00.846285"]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/users_controller.rb:10:in `create'
Completed 201 Created in 39ms (Views: 0.4ms | ActiveRecord: 4.8ms | Allocations: 23151)


Started POST "/api/users" for ::1 at 2023-11-27 14:34:43 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr3", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Create (0.8ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr3"], ["created_at", "2023-11-27 07:34:43.846539"], ["updated_at", "2023-11-27 07:34:43.846539"]]
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mSystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/users_controller.rb:10:in `create'
No template found for Api::UsersController#create, rendering head :no_content
Completed 204 No Content in 27ms (ActiveRecord: 3.5ms | Allocations: 22702)


Started POST "/api/users" for ::1 at 2023-11-27 14:34:51 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr3", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Create (0.9ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr3"], ["created_at", "2023-11-27 07:34:51.625506"], ["updated_at", "2023-11-27 07:34:51.625506"]]
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mSystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/users_controller.rb:10:in `create'
No template found for Api::UsersController#create, rendering head :no_content
Completed 204 No Content in 38ms (ActiveRecord: 6.2ms | Allocations: 22799)


Started POST "/api/users" for ::1 at 2023-11-27 14:35:08 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr3", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.2ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Create (0.8ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr3"], ["created_at", "2023-11-27 07:35:08.990603"], ["updated_at", "2023-11-27 07:35:08.990603"]]
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mSystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/users_controller.rb:10:in `create'
Completed 422 Unprocessable Entity in 29ms (Views: 0.1ms | ActiveRecord: 3.4ms | Allocations: 22395)


Started POST "/api/users" for ::1 at 2023-11-27 14:36:22 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr3", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Create (0.7ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr3"], ["created_at", "2023-11-27 07:36:23.039825"], ["updated_at", "2023-11-27 07:36:23.039825"]]
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mSystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/users_controller.rb:10:in `create'
Completed 422 Unprocessable Entity in 27ms (Views: 0.1ms | ActiveRecord: 3.0ms | Allocations: 23280)


Started POST "/api/users" for ::1 at 2023-11-27 14:37:13 +0700
Processing by Api::UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Sang mr3", "birth_date"=>"1990-01-01"}}
  [1m[36mSystemUser Load (0.2ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Create (1.1ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Sang mr3"], ["created_at", "2023-11-27 07:37:13.614094"], ["updated_at", "2023-11-27 07:37:13.614094"]]
  â†³ app/controllers/api/users_controller.rb:11:in `block in create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 0], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:19:in `block in create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/api/users_controller.rb:10:in `create'
Completed 422 Unprocessable Entity in 10ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 4450)


Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-27 14:45:09 +0700
Processing by Api::SessionsController#create as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "session"=>{}}
  [1m[36mSystemUser Load (1.3ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:6:in `create'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.2ms | Allocations: 4465)


Started POST "/api/teams" for ::1 at 2023-11-27 14:45:34 +0700
Processing by Api::TeamsController#create as */*
  Parameters: {"team"=>{"name"=>"Team user 4", "description"=>"Team user 4 of Company A"}}
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 195)


Started POST "/api/teams" for ::1 at 2023-11-27 14:45:46 +0700
Processing by Api::TeamsController#create as */*
  Parameters: {"team"=>{"name"=>"Team user 4", "description"=>"Team user 4 of Company A"}}
  [1m[36mSystemUser Load (0.3ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/teams_controller.rb:11:in `block in create'
  [1m[36mWallet Create (1.0ms)[0m  [1m[32mINSERT INTO "wallets" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Wallet of Team user 4"], ["created_at", "2023-11-27 07:45:46.822487"], ["updated_at", "2023-11-27 07:45:46.822487"]]
  â†³ app/controllers/api/teams_controller.rb:11:in `block in create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/api/teams_controller.rb:18:in `block in create'
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/teams_controller.rb:18:in `block in create'
  [1m[36mTeam Create (1.7ms)[0m  [1m[32mINSERT INTO "entities" ("wallet_id", "system_user_id", "type", "name", "birth_date", "description", "symbol", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["wallet_id", 13], ["system_user_id", 4], ["type", "Team"], ["name", "Team user 4"], ["birth_date", nil], ["description", "Team user 4 of Company A"], ["symbol", nil], ["created_at", "2023-11-27 07:45:46.829912"], ["updated_at", "2023-11-27 07:45:46.829912"]]
  â†³ app/controllers/api/teams_controller.rb:18:in `block in create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/teams_controller.rb:10:in `create'
Completed 201 Created in 38ms (Views: 0.5ms | ActiveRecord: 3.4ms | Allocations: 22345)


Started POST "/api/deposit" for ::1 at 2023-11-27 14:51:46 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"12", "amount"=>"1000", "description"=>"Transfer from Bank account"}
  [1m[36mSystemUser Load (1.5ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:80:in `set_user'
User not found: Couldn't find User with 'id'=12
Filter chain halted as :set_user rendered or redirected
Completed 404 Not Found in 19ms (Views: 0.2ms | ActiveRecord: 2.5ms | Allocations: 7714)


Started POST "/api/deposit" for ::1 at 2023-11-27 14:52:09 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"9", "amount"=>"1000", "description"=>"Transfer from Bank account"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:80:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:13:in `deposit'
  [1m[36mTransaction Create (1.4ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 5], ["amount", 1000.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-27 07:52:09.707710"], ["updated_at", "2023-11-27 07:52:09.707710"]]
  â†³ app/controllers/api/wallets_controller.rb:13:in `deposit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:13:in `deposit'
Completed 201 Created in 28ms (Views: 0.4ms | ActiveRecord: 2.4ms | Allocations: 14062)


Started POST "/api/deposit" for ::1 at 2023-11-27 15:07:15 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"9", "amount"=>"1000", "description"=>"Transfer from Bank account"}
  [1m[36mSystemUser Load (1.2ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:105:in `set_user'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:17:in `block in deposit'
  [1m[36mTransaction Create (3.0ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 5], ["amount", 1000.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-27 08:07:15.291609"], ["updated_at", "2023-11-27 08:07:15.291609"]]
  â†³ app/controllers/api/wallets_controller.rb:17:in `block in deposit'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
Completed 201 Created in 32ms (Views: 0.4ms | ActiveRecord: 5.1ms | Allocations: 20145)


Started POST "/api/withdraw" for ::1 at 2023-11-27 15:15:58 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "description"=>"Withdraw in ATM"}
  [1m[36mSystemUser Load (0.8ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:119:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:42:in `withdraw'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:49:in `block in withdraw'
  [1m[36mTransaction Create (0.8ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 10.0], ["description", "Withdraw in ATM"], ["message", nil], ["created_at", "2023-11-27 08:15:59.043149"], ["updated_at", "2023-11-27 08:15:59.043149"]]
  â†³ app/controllers/api/wallets_controller.rb:49:in `block in withdraw'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:48:in `withdraw'
Completed 201 Created in 40ms (Views: 0.4ms | ActiveRecord: 2.7ms | Allocations: 26868)


Started POST "/api/withdraw" for ::1 at 2023-11-27 15:16:33 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"1000000", "description"=>"Withdraw in ATM"}
  [1m[36mSystemUser Load (0.2ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:119:in `set_user'
  [1m[36mWallet Load (0.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:42:in `withdraw'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
Completed 422 Unprocessable Entity in 6ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 2350)


Started POST "/api/withdraw" for ::1 at 2023-11-27 15:16:42 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "description"=>"Withdraw in ATM"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:119:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:42:in `withdraw'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:49:in `block in withdraw'
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 10.0], ["description", "Withdraw in ATM"], ["message", nil], ["created_at", "2023-11-27 08:16:42.548601"], ["updated_at", "2023-11-27 08:16:42.548601"]]
  â†³ app/controllers/api/wallets_controller.rb:49:in `block in withdraw'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:48:in `withdraw'
Completed 201 Created in 7ms (Views: 0.3ms | ActiveRecord: 1.1ms | Allocations: 3805)


Started POST "/api/transfer" for ::1 at 2023-11-27 15:22:48 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 214)


Started POST "/api/transfer" for ::1 at 2023-11-27 15:23:20 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mSystemUser Load (0.9ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:138:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:76:in `transfer'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.8ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 10.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-27 08:23:20.466678"], ["updated_at", "2023-11-27 08:23:20.466678"]]
  â†³ app/controllers/api/wallets_controller.rb:79:in `block in transfer'
  [1m[36mWallet Load (0.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:87:in `block in transfer'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 10.0], ["description", "Transfer from wallet 3"], ["message", "Happy birdth day"], ["created_at", "2023-11-27 08:23:20.469723"], ["updated_at", "2023-11-27 08:23:20.469723"]]
  â†³ app/controllers/api/wallets_controller.rb:88:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:76:in `transfer'
Completed 200 OK in 68ms (Views: 1.5ms | ActiveRecord: 3.3ms | Allocations: 33492)


Started POST "/api/transfer" for ::1 at 2023-11-27 15:23:26 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:138:in `set_user'
  [1m[36mWallet Load (0.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:76:in `transfer'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.6ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 10.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-27 08:23:26.675486"], ["updated_at", "2023-11-27 08:23:26.675486"]]
  â†³ app/controllers/api/wallets_controller.rb:79:in `block in transfer'
  [1m[36mWallet Load (0.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:87:in `block in transfer'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 10.0], ["description", "Transfer from wallet 3"], ["message", "Happy birdth day"], ["created_at", "2023-11-27 08:23:26.677666"], ["updated_at", "2023-11-27 08:23:26.677666"]]
  â†³ app/controllers/api/wallets_controller.rb:88:in `block in transfer'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:76:in `transfer'
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 1.4ms | Allocations: 6019)


Started POST "/api/transfer" for ::1 at 2023-11-27 21:16:15 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mSystemUser Load (2.6ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:113:in `set_user'
  [1m[36mWallet Load (0.7ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:76:in `transfer'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (1.8ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 10.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-27 14:16:16.391452"], ["updated_at", "2023-11-27 14:16:16.391452"]]
  â†³ app/controllers/api/wallets_controller.rb:79:in `block in transfer'
  [1m[36mWallet Load (0.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:87:in `block in transfer'
  [1m[36mTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 10.0], ["description", "Transfer from wallet 3"], ["message", "Happy birdth day"], ["created_at", "2023-11-27 14:16:16.396666"], ["updated_at", "2023-11-27 14:16:16.396666"]]
  â†³ app/controllers/api/wallets_controller.rb:88:in `block in transfer'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:76:in `transfer'
Completed 200 OK in 127ms (Views: 0.8ms | ActiveRecord: 8.0ms | Allocations: 29673)


Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-27 21:16:25 +0700
  
AbstractController::ActionNotFound (The action 'create' could not be found for Api::SessionsController):
  
actionpack (7.1.2) lib/abstract_controller/base.rb:155:in `process'
actionview (7.1.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
rack (3.0.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.8) lib/rack/etag.rb:29:in `call'
rack (3.0.8) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.8) lib/rack/head.rb:15:in `call'
actionpack (7.1.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (7.1.2) lib/active_record/migration.rb:654:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-27 21:16:54 +0700
Processing by Api::SessionsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "session"=>{}}
  [1m[36mSystemUser Load (0.8ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/sessions_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.6ms | Allocations: 4942)


Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-27 21:19:05 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.6ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 3.4ms | Allocations: 4870)


Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-27 21:19:16 +0700
  
Zeitwerk::NameError (expected file /Users/sangngo/Works/Projects2/internal_wallet/app/controllers/api/authentications_controller.rb to define constant Api::AuthenticationsController, but didn't):
  
zeitwerk (2.6.12) lib/zeitwerk/loader/callbacks.rb:33:in `on_file_autoloaded'
zeitwerk (2.6.12) lib/zeitwerk/kernel.rb:31:in `require'
activesupport (7.1.2) lib/active_support/inflector/methods.rb:290:in `const_get'
activesupport (7.1.2) lib/active_support/inflector/methods.rb:290:in `constantize'
activesupport (7.1.2) lib/active_support/core_ext/string/inflections.rb:74:in `constantize'
actionpack (7.1.2) lib/action_dispatch/http/request.rb:90:in `controller_class_for'
actionpack (7.1.2) lib/action_dispatch/request/utils.rb:100:in `action_encoding_template'
actionpack (7.1.2) lib/action_dispatch/request/utils.rb:85:in `encode'
actionpack (7.1.2) lib/action_dispatch/request/utils.rb:45:in `set_binary_encoding'
actionpack (7.1.2) lib/action_dispatch/http/parameters.rb:68:in `path_parameters='
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:48:in `block in serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
rack (3.0.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.8) lib/rack/etag.rb:29:in `call'
rack (3.0.8) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.8) lib/rack/head.rb:15:in `call'
actionpack (7.1.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (7.1.2) lib/active_record/migration.rb:654:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-27 21:19:29 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.6ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.2ms | Allocations: 4942)


Started POST "/api/deposit" for ::1 at 2023-11-27 21:21:31 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"9", "amount"=>"1000", "description"=>"Transfer from Bank account"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:113:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:17:in `block in deposit'
  [1m[36mTransaction Create (1.9ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 5], ["amount", 1000.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-27 14:21:31.454073"], ["updated_at", "2023-11-27 14:21:31.454073"]]
  â†³ app/controllers/api/wallets_controller.rb:17:in `block in deposit'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
Completed 201 Created in 43ms (Views: 0.5ms | ActiveRecord: 4.7ms | Allocations: 17616)


Started POST "/api/login?indices=NIFTY%2050&identifier=password" for ::1 at 2023-11-28 10:50:35 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"indices"=>"NIFTY 50", "identifier"=>"password", "authentication"=>{}}
  [1m[36mSystemUser Load (3.2ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
Completed 401 Unauthorized in 14ms (Views: 0.2ms | ActiveRecord: 4.5ms | Allocations: 2183)


Started POST "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 10:50:53 +0700
  
ActionController::RoutingError (No route matches [POST] "/api/price"):
  
Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 10:51:39 +0700
  
LoadError (cannot load such file -- latest_stock_price):
  
app/controllers/api/test_latest_stock_prices_controller.rb:1:in `<main>'
Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 10:52:27 +0700
  
LoadError (cannot load such file -- latest_stock_price):
  
app/controllers/api/test_latest_stock_prices_controller.rb:1:in `<main>'
Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 10:57:36 +0700
  
LoadError (cannot load such file -- latest_stock_price):
  
app/controllers/api/test_latest_stock_prices_controller.rb:1:in `<main>'
Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 10:58:09 +0700
  
LoadError (cannot load such file -- latest_stock_price):
  
app/controllers/api/test_latest_stock_prices_controller.rb:1:in `<main>'
Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 10:59:45 +0700
  
LoadError (cannot load such file -- latest_stock_price):
  
app/controllers/api/test_latest_stock_prices_controller.rb:1:in `<main>'
Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 11:00:03 +0700
  
LoadError (cannot load such file -- latest_stock_price):
  
app/controllers/api/test_latest_stock_prices_controller.rb:1:in `<main>'
Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 11:05:25 +0700
  
LoadError (cannot load such file -- latest_stock_price):
  
app/controllers/api/test_latest_stock_prices_controller.rb:1:in `<main>'
Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 11:05:37 +0700
  
LoadError (cannot load such file -- latest_stock_price):
  
app/controllers/api/test_latest_stock_prices_controller.rb:1:in `<main>'
Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 11:19:09 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 50", "test_latest_stock_price"=>{}}
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 218)


Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 11:20:05 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 50", "test_latest_stock_price"=>{}}
Completed 404 Not Found in 4ms (ActiveRecord: 0.0ms | Allocations: 717)


  
AbstractController::ActionNotFound (The login action could not be found for the :authenticate_user_from_token!
callback on Api::TestLatestStockPricesController, but it is listed in the controller's
:only option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.1.2) lib/abstract_controller/callbacks.rb:62:in `match?'
activesupport (7.1.2) lib/active_support/callbacks.rb:432:in `block in inverted_lambda'
activesupport (7.1.2) lib/active_support/callbacks.rb:182:in `block (2 levels) in halting_and_conditional'
activesupport (7.1.2) lib/active_support/callbacks.rb:182:in `all?'
activesupport (7.1.2) lib/active_support/callbacks.rb:182:in `block in halting_and_conditional'
activesupport (7.1.2) lib/active_support/callbacks.rb:598:in `block in invoke_before'
activesupport (7.1.2) lib/active_support/callbacks.rb:598:in `each'
activesupport (7.1.2) lib/active_support/callbacks.rb:598:in `invoke_before'
activesupport (7.1.2) lib/active_support/callbacks.rb:119:in `block in run_callbacks'
actiontext (7.1.2) lib/action_text/rendering.rb:23:in `with_renderer'
actiontext (7.1.2) lib/action_text/engine.rb:69:in `block (4 levels) in <class:Engine>'
activesupport (7.1.2) lib/active_support/callbacks.rb:130:in `instance_exec'
activesupport (7.1.2) lib/active_support/callbacks.rb:130:in `block in run_callbacks'
activesupport (7.1.2) lib/active_support/callbacks.rb:141:in `run_callbacks'
actionpack (7.1.2) lib/abstract_controller/callbacks.rb:258:in `process_action'
actionpack (7.1.2) lib/action_controller/metal/rescue.rb:25:in `process_action'
actionpack (7.1.2) lib/action_controller/metal/instrumentation.rb:74:in `block in process_action'
activesupport (7.1.2) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.1.2) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (7.1.2) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.1.2) lib/action_controller/metal/instrumentation.rb:73:in `process_action'
actionpack (7.1.2) lib/action_controller/metal/params_wrapper.rb:261:in `process_action'
activerecord (7.1.2) lib/active_record/railties/controller_runtime.rb:32:in `process_action'
actionpack (7.1.2) lib/abstract_controller/base.rb:160:in `process'
actionview (7.1.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
rack (3.0.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.8) lib/rack/etag.rb:29:in `call'
rack (3.0.8) lib/rack/conditional_get.rb:31:in `call'
rack (3.0.8) lib/rack/head.rb:15:in `call'
actionpack (7.1.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (7.1.2) lib/active_record/migration.rb:654:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 11:20:27 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 50", "test_latest_stock_price"=>{}}
Completed 200 OK in 1058ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1258)


Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 11:20:47 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 50", "test_latest_stock_price"=>{}}
Completed 200 OK in 770ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 740)


Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 11:20:50 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 50", "test_latest_stock_price"=>{}}
Completed 200 OK in 176ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 763)


Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 11:20:54 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 50", "test_latest_stock_price"=>{}}
Completed 200 OK in 758ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 742)


Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 11:22:04 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 50", "test_latest_stock_price"=>{}}
Completed 200 OK in 773ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 848)


Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 11:23:53 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 50", "test_latest_stock_price"=>{}}
Completed 200 OK in 1183ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 861)


Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 11:25:03 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 50", "test_latest_stock_price"=>{}}
Completed 200 OK in 183ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 882)


Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 11:25:22 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 50", "test_latest_stock_price"=>{}}
Completed 200 OK in 839ms (Views: 4.8ms | ActiveRecord: 0.0ms | Allocations: 2809)


Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 11:25:44 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 50", "test_latest_stock_price"=>{}}
Completed 200 OK in 707ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 860)


Started GET "/api/price?indices=NIFTY%2050" for ::1 at 2023-11-28 11:33:57 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 50", "test_latest_stock_price"=>{}}
Completed 200 OK in 903ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 853)


Started GET "/api/price" for ::1 at 2023-11-28 11:34:03 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"test_latest_stock_price"=>{}}
Completed 200 OK in 680ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 738)


Started GET "/api/price" for ::1 at 2023-11-28 11:34:44 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"test_latest_stock_price"=>{}}
Completed 200 OK in 544ms (Views: 4.9ms | ActiveRecord: 0.0ms | Allocations: 2769)


Started GET "/api/price" for ::1 at 2023-11-28 11:36:13 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"test_latest_stock_price"=>{}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 471)


  
SystemExit ("NIFTY 50"):
  
lib/latest_stock_price.rb:12:in `abort'
lib/latest_stock_price.rb:12:in `price'
app/controllers/api/test_latest_stock_prices_controller.rb:9:in `price'
Started GET "/api/price" for ::1 at 2023-11-28 11:36:32 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"test_latest_stock_price"=>{}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 466)


  
SystemExit ("NIFTY 50"):
  
lib/latest_stock_price.rb:12:in `abort'
lib/latest_stock_price.rb:12:in `price'
app/controllers/api/test_latest_stock_prices_controller.rb:9:in `price'
Started GET "/api/price" for ::1 at 2023-11-28 11:36:43 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"test_latest_stock_price"=>{}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 466)


  
SystemExit ("NIFTY 50"):
  
lib/latest_stock_price.rb:12:in `abort'
lib/latest_stock_price.rb:12:in `price'
app/controllers/api/test_latest_stock_prices_controller.rb:9:in `price'
Started GET "/api/price?indices1=NIFTY%2050&identifier=password" for ::1 at 2023-11-28 11:36:51 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices1"=>"NIFTY 50", "identifier"=>"password", "test_latest_stock_price"=>{}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 466)


  
SystemExit ("NIFTY 50"):
  
lib/latest_stock_price.rb:12:in `abort'
lib/latest_stock_price.rb:12:in `price'
app/controllers/api/test_latest_stock_prices_controller.rb:9:in `price'
Started GET "/api/price" for ::1 at 2023-11-28 11:36:59 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"test_latest_stock_price"=>{}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 466)


  
SystemExit ("NIFTY 50"):
  
lib/latest_stock_price.rb:12:in `abort'
lib/latest_stock_price.rb:12:in `price'
app/controllers/api/test_latest_stock_prices_controller.rb:9:in `price'
Started GET "/api/price" for ::1 at 2023-11-28 11:37:09 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"test_latest_stock_price"=>{}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 466)


  
SystemExit ("NIFTY 50"):
  
lib/latest_stock_price.rb:12:in `abort'
lib/latest_stock_price.rb:12:in `price'
app/controllers/api/test_latest_stock_prices_controller.rb:9:in `price'
Started GET "/api/price" for ::1 at 2023-11-28 11:37:26 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"test_latest_stock_price"=>{}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 466)


  
SystemExit ("NIFTY 50"):
  
lib/latest_stock_price.rb:12:in `abort'
lib/latest_stock_price.rb:12:in `price'
app/controllers/api/test_latest_stock_prices_controller.rb:9:in `price'
Started GET "/api/price" for ::1 at 2023-11-28 11:39:23 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"test_latest_stock_price"=>{}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 473)


  
ArgumentError (Indices cannot be nil):
  
lib/latest_stock_price.rb:11:in `price'
app/controllers/api/test_latest_stock_prices_controller.rb:9:in `price'
Started GET "/api/price?indices=12" for ::1 at 2023-11-28 11:39:55 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"12", "test_latest_stock_price"=>{}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 470)


  
SystemExit ("12"):
  
lib/latest_stock_price.rb:12:in `abort'
lib/latest_stock_price.rb:12:in `price'
app/controllers/api/test_latest_stock_prices_controller.rb:9:in `price'
Started GET "/api/price?indices=12" for ::1 at 2023-11-28 11:40:20 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"12", "test_latest_stock_price"=>{}}
Completed 200 OK in 1036ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 853)


Started GET "/api/price?indices=12" for ::1 at 2023-11-28 11:40:44 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"12", "test_latest_stock_price"=>{}}
Completed 200 OK in 398ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1042)


Started GET "/api/price?indices=NIFTY%20100" for ::1 at 2023-11-28 11:41:00 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 100", "test_latest_stock_price"=>{}}
Completed 200 OK in 680ms (Views: 6.3ms | ActiveRecord: 0.0ms | Allocations: 4357)


Started GET "/api/price" for ::1 at 2023-11-28 11:42:26 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"test_latest_stock_price"=>{}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 471)


  
ArgumentError (Indices cannot be nil):
  
lib/latest_stock_price.rb:12:in `price'
app/controllers/api/test_latest_stock_prices_controller.rb:9:in `price'
Started GET "/api/price?indices=NIFTY%20100" for ::1 at 2023-11-28 11:45:42 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 100", "test_latest_stock_price"=>{}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 470)


  
NoMethodError (undefined method `price' for LatestStockPrice:Module):
  
app/controllers/api/test_latest_stock_prices_controller.rb:9:in `price'
Started GET "/api/price?indices=NIFTY%20100" for ::1 at 2023-11-28 11:45:55 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 100", "test_latest_stock_price"=>{}}
Completed 200 OK in 967ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 863)


Started GET "/api/price?indices=NIFTY%20100" for ::1 at 2023-11-28 13:23:43 +0700
  
LoadError (cannot load such file -- latest_stock_price_gem):
  
app/controllers/api/test_latest_stock_prices_controller.rb:1:in `<main>'
Started GET "/api/price?indices=NIFTY%20100" for ::1 at 2023-11-28 13:25:57 +0700
  
LoadError (cannot load such file -- latest_stock_price_gem):
  
app/controllers/api/test_latest_stock_prices_controller.rb:1:in `<main>'
Started GET "/api/price?indices=NIFTY%20100" for ::1 at 2023-11-28 13:26:05 +0700
Processing by Api::TestLatestStockPricesController#price as */*
  Parameters: {"indices"=>"NIFTY 100", "test_latest_stock_price"=>{}}
Completed 200 OK in 990ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 862)


Started GET "/api/price?indices=NIFTY%20100" for ::1 at 2023-11-28 13:28:06 +0700
  
LoadError (cannot load such file -- latest_stock_price_gem):
  
app/controllers/api/test_latest_stock_prices_controller.rb:1:in `<main>'
Started GET "/api/price?indices=NIFTY%20100" for ::1 at 2023-11-28 13:30:13 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
LoadError (cannot load such file -- latest_stock_price_gem):
  
app/controllers/api/test_latest_stock_prices_controller.rb:1:in `<main>'
Started GET "/api/price?indices=NIFTY%20100" for ::1 at 2023-11-28 13:35:00 +0700
  
LoadError (cannot load such file -- latest_stock_price_gem):
  
app/controllers/api/test_latest_stock_prices_controller.rb:1:in `<main>'
Started GET "/api/price?indices=NIFTY%20100" for ::1 at 2023-11-28 13:35:10 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
LoadError (cannot load such file -- latest_stock_price_gem):
  
app/controllers/api/test_latest_stock_prices_controller.rb:1:in `<main>'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:02:51 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.5ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:18:in `authenticate'
Completed 200 OK in 56ms (Views: 0.8ms | ActiveRecord: 3.5ms | Allocations: 19008)


Started POST "/api/deposit" for ::1 at 2023-11-28 14:19:31 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"9", "amount"=>"1000", "description"=>"Transfer from Bank account"}
  [1m[36mSystemUser Load (3.2ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:113:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:17:in `block in deposit'
  [1m[36mTransaction Create (1.8ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 5], ["amount", 1000.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-28 07:19:32.138113"], ["updated_at", "2023-11-28 07:19:32.138113"]]
  â†³ app/controllers/api/wallets_controller.rb:17:in `block in deposit'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
Completed 201 Created in 89ms (Views: 1.6ms | ActiveRecord: 9.1ms | Allocations: 32929)


Started POST "/api/withdraw" for ::1 at 2023-11-28 14:19:41 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "description"=>"Withdraw in ATM"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:113:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:42:in `withdraw'
  [1m[36mTransaction Sum (0.6ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:49:in `block in withdraw'
  [1m[36mTransaction Create (3.7ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 10.0], ["description", "Withdraw in ATM"], ["message", nil], ["created_at", "2023-11-28 07:19:41.098550"], ["updated_at", "2023-11-28 07:19:41.098550"]]
  â†³ app/controllers/api/wallets_controller.rb:49:in `block in withdraw'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:48:in `withdraw'
Completed 201 Created in 38ms (Views: 0.6ms | ActiveRecord: 5.5ms | Allocations: 11360)


Started POST "/api/transfer" for ::1 at 2023-11-28 14:19:44 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:113:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:76:in `transfer'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 10.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-28 07:19:44.896186"], ["updated_at", "2023-11-28 07:19:44.896186"]]
  â†³ app/controllers/api/wallets_controller.rb:79:in `block in transfer'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:87:in `block in transfer'
  [1m[36mTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 10.0], ["description", "Transfer from wallet 3"], ["message", "Happy birdth day"], ["created_at", "2023-11-28 07:19:44.899389"], ["updated_at", "2023-11-28 07:19:44.899389"]]
  â†³ app/controllers/api/wallets_controller.rb:88:in `block in transfer'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:76:in `transfer'
Completed 200 OK in 15ms (Views: 0.3ms | ActiveRecord: 1.4ms | Allocations: 6794)


Started GET "/api/user/balance" for ::1 at 2023-11-28 14:26:14 +0700
Processing by Api::UsersController#balance as */*
  Parameters: {"user_id"=>"7"}
  [1m[36mSystemUser Load (1.4ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" IS NULL LIMIT ?[0m  [["type", "User"], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:31:in `balance'
Completed 404 Not Found in 17ms (Views: 0.1ms | ActiveRecord: 2.0ms | Allocations: 7018)


Started GET "/api/user/balance" for ::1 at 2023-11-28 14:27:03 +0700
Processing by Api::UsersController#balance as */*
  Parameters: {"user_id"=>"7"}
  [1m[36mSystemUser Load (0.2ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" IS NULL LIMIT ?[0m  [["type", "User"], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:31:in `balance'
Completed 500 Internal Server Error in 16ms (ActiveRecord: 2.1ms | Allocations: 8121)


  
SystemExit (nil):
  
app/controllers/api/users_controller.rb:32:in `abort'
app/controllers/api/users_controller.rb:32:in `balance'
Started GET "/api/user/balance" for ::1 at 2023-11-28 14:27:16 +0700
Processing by Api::UsersController#balance as */*
  Parameters: {"user_id"=>"7"}
  [1m[36mSystemUser Load (0.3ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:31:in `balance'
Completed 500 Internal Server Error in 26ms (ActiveRecord: 2.7ms | Allocations: 15871)


  
SystemExit (#<User id: 7, wallet_id: 3, system_user_id: 1, type: "User", name: "Sang mr", birth_date: "1990-01-01", description: nil, symbol: nil, created_at: "2023-11-26 03:22:16.158921000 +0000", updated_at: "2023-11-26 03:22:16.158921000 +0000">):
  
app/controllers/api/users_controller.rb:32:in `abort'
app/controllers/api/users_controller.rb:32:in `balance'
Started GET "/api/user/balance" for ::1 at 2023-11-28 14:27:22 +0700
Processing by Api::UsersController#balance as */*
  Parameters: {"user_id"=>"7"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:31:in `balance'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 2.1ms | Allocations: 15771)


  
NoMethodError (undefined method `wallet' for nil:NilClass):
  
app/controllers/api/users_controller.rb:34:in `balance'
Started GET "/api/user/balance" for ::1 at 2023-11-28 14:27:35 +0700
Processing by Api::UsersController#balance as */*
  Parameters: {"user_id"=>"7"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:31:in `balance'
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:34:in `balance'
  [1m[36mTransaction Sum (1.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.9ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
Completed 200 OK in 42ms (Views: 0.2ms | ActiveRecord: 5.2ms | Allocations: 24023)


Started GET "/api/user/balance" for ::1 at 2023-11-28 14:27:53 +0700
Processing by Api::UsersController#balance as */*
  Parameters: {"user_id"=>"7"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:31:in `balance'
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:34:in `balance'
  [1m[36mTransaction Sum (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
Completed 200 OK in 38ms (Views: 0.1ms | ActiveRecord: 4.0ms | Allocations: 23966)


Started GET "/api/user/balance" for ::1 at 2023-11-28 14:28:30 +0700
Processing by Api::UsersController#balance as */*
  Parameters: {"user_id"=>"7"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:31:in `balance'
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:33:in `balance'
  [1m[36mTransaction Sum (0.6ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
Completed 200 OK in 40ms (Views: 0.2ms | ActiveRecord: 4.1ms | Allocations: 23949)


Started GET "/api/user/balance" for ::1 at 2023-11-28 14:28:54 +0700
Processing by Api::UsersController#balance as */*
  Parameters: {"user_id"=>"7"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:31:in `balance'
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:33:in `balance'
  [1m[36mTransaction Sum (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
Completed 200 OK in 38ms (Views: 0.1ms | ActiveRecord: 3.9ms | Allocations: 23908)


Started GET "/api/user/balance" for ::1 at 2023-11-28 14:29:40 +0700
Processing by Api::UsersController#balance as */*
  Parameters: {"user_id"=>"7"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `authenticate_user_from_token!'
Completed 500 Internal Server Error in 13ms (ActiveRecord: 2.5ms | Allocations: 5294)


  
SystemExit ({"user_id"=>4, "exp"=>1701074709}):
  
app/controllers/application_controller.rb:10:in `abort'
app/controllers/application_controller.rb:10:in `authenticate_user_from_token!'
Started GET "/api/user/balance" for ::1 at 2023-11-28 14:30:57 +0700
Processing by Api::UsersController#balance as */*
  Parameters: {"user_id"=>"7"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 468)


  
SystemExit (1701156658):
  
app/controllers/application_controller.rb:10:in `abort'
app/controllers/application_controller.rb:10:in `authenticate_user_from_token!'
Started GET "/api/user/balance" for ::1 at 2023-11-28 14:31:57 +0700
Processing by Api::UsersController#balance as */*
  Parameters: {"user_id"=>"7"}
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 228)


Started GET "/api/user/balance" for ::1 at 2023-11-28 14:32:16 +0700
Processing by Api::UsersController#balance as */*
  Parameters: {"user_id"=>"7"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:16:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:31:in `balance'
  [1m[36mWallet Load (0.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:33:in `balance'
  [1m[36mTransaction Sum (1.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.8ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
Completed 200 OK in 44ms (Views: 0.1ms | ActiveRecord: 7.2ms | Allocations: 24008)


Started GET "/api/user/balance" for ::1 at 2023-11-28 14:33:06 +0700
Processing by Api::UsersController#balance as */*
  Parameters: {"user_id"=>"7"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:31:in `balance'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:33:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:9:in `balance'
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 2.7ms | Allocations: 23955)


Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:42:25 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (1.8ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
Completed 500 Internal Server Error in 18ms (ActiveRecord: 3.0ms | Allocations: 4499)


  
NoMethodError (undefined method `find_by_username' for SystemUser:Class):
  
app/models/system_user.rb:8:in `authenticate'
app/controllers/api/authentications_controller.rb:8:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:42:51 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mSystemUser Load (1.8ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."username" = ? LIMIT ?[0m  [["username", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 500 Internal Server Error in 16ms (ActiveRecord: 3.5ms | Allocations: 6021)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: system_users.username):
  
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:43:02 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.8ms | Allocations: 5224)


  
NameError (uninitialized constant SystemUser::BCrypt):
  
app/models/system_user.rb:12:in `authenticate'
app/controllers/api/authentications_controller.rb:8:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:44:21 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
Completed 500 Internal Server Error in 46ms (ActiveRecord: 0.0ms | Allocations: 620)


  
LoadError (cannot load such file -- bcrypt):
  
app/models/system_user.rb:1:in `<main>'
app/controllers/api/authentications_controller.rb:6:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:44:47 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.6ms | Allocations: 5263)


  
NameError (uninitialized constant SystemUser::BCrypt):
  
app/models/system_user.rb:12:in `authenticate'
app/controllers/api/authentications_controller.rb:8:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:47:33 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 4.2ms | Allocations: 5318)


  
SystemExit (5f4dcc3b5aa765d61d8327deb882cf99):
  
app/models/system_user.rb:12:in `abort'
app/models/system_user.rb:12:in `authenticate'
app/controllers/api/authentications_controller.rb:8:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:48:41 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 1.6ms | Allocations: 5379)


  
NoMethodError (undefined method `password_digest' for #<SystemUser id: 4, user_name: "team_user_4", password: [FILTERED], created_at: nil, updated_at: nil>):
  
app/models/system_user.rb:16:in `authenticate'
app/controllers/api/authentications_controller.rb:8:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:49:01 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 401 Unauthorized in 16ms (Views: 0.2ms | ActiveRecord: 2.2ms | Allocations: 5012)


Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:49:15 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.6ms | Allocations: 5216)


  
SystemExit (5f4dcc3b5aa765d61d8327deb882cf99):
  
app/models/system_user.rb:12:in `abort'
app/models/system_user.rb:12:in `authenticate'
app/controllers/api/authentications_controller.rb:8:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:49:47 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.1ms | Allocations: 1111)


  
SystemExit (5f4dcc3b5aa765d61d8327deb882cf99):
  
app/models/system_user.rb:12:in `abort'
app/models/system_user.rb:12:in `authenticate'
app/controllers/api/authentications_controller.rb:8:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:49:54 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 401 Unauthorized in 12ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 5005)


Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:50:28 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 1.6ms | Allocations: 5223)


  
SystemExit (5f4dcc3b5aa765d61d8327deb882cf99):
  
app/models/system_user.rb:13:in `abort'
app/models/system_user.rb:13:in `authenticate'
app/controllers/api/authentications_controller.rb:8:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:50:45 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 1113)


  
SystemExit (5f4dcc3b5aa765d61d8327deb882cf99):
  
app/models/system_user.rb:13:in `abort'
app/models/system_user.rb:13:in `authenticate'
app/controllers/api/authentications_controller.rb:8:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:51:26 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 2.9ms | Allocations: 5280)


  
SystemExit (5f4dcc3b5aa765d61d8327deb882cf99):
  
app/models/system_user.rb:13:in `abort'
app/models/system_user.rb:13:in `authenticate'
app/controllers/api/authentications_controller.rb:8:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:51:36 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 401 Unauthorized in 8ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 5006)


Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:51:54 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 401 Unauthorized in 8ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 4962)


Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:52:45 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.7ms | Allocations: 5222)


  
ArgumentError (wrong number of arguments (given 2, expected 0..1)):
  
app/models/system_user.rb:13:in `abort'
app/models/system_user.rb:13:in `authenticate'
app/controllers/api/authentications_controller.rb:8:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:53:15 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 893)


  
SyntaxError (/Users/sangngo/Works/Projects2/internal_wallet/app/models/system_user.rb:14: syntax error, unexpected local variable or method, expecting ')'
        abort user.password
        ^~~~~
):
  
app/models/system_user.rb:14: syntax error, unexpected local variable or method, expecting ')'
app/controllers/api/authentications_controller.rb:6:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:53:27 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 1.8ms | Allocations: 5295)


  
SystemExit (5f4dcc3b5aa765d61d8327deb882cf99):
  
app/models/system_user.rb:14:in `abort'
app/models/system_user.rb:14:in `authenticate'
app/controllers/api/authentications_controller.rb:8:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:53:46 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.6ms | Allocations: 5285)


  
SystemExit (696d29e0940a4957748fe3fc9efd22a3):
  
app/models/system_user.rb:13:in `abort'
app/models/system_user.rb:13:in `authenticate'
app/controllers/api/authentications_controller.rb:8:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:53:52 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 1114)


  
SystemExit (696d29e0940a4957748fe3fc9efd22a3):
  
app/models/system_user.rb:13:in `abort'
app/models/system_user.rb:13:in `authenticate'
app/controllers/api/authentications_controller.rb:8:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:53:53 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 1114)


  
SystemExit (696d29e0940a4957748fe3fc9efd22a3):
  
app/models/system_user.rb:13:in `abort'
app/models/system_user.rb:13:in `authenticate'
app/controllers/api/authentications_controller.rb:8:in `login'
Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:54:45 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 5019)


Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:55:11 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 401 Unauthorized in 9ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 4939)


Started POST "/api/login?user_name=team_user_4&password=[FILTERED]" for ::1 at 2023-11-28 14:55:15 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"team_user_4", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "team_user_4"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 764)


Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-28 14:56:18 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"sang", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 401 Unauthorized in 8ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 4914)


Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-28 14:56:21 +0700
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"sang", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 764)


Started POST "/api/login?user_name=sang&password=[FILTERED]" for ::1 at 2023-11-28 20:50:40 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::AuthenticationsController#login as */*
  Parameters: {"user_name"=>"sang", "password"=>"[FILTERED]", "authentication"=>{}}
  [1m[36mSystemUser Load (0.5ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/controllers/api/authentications_controller.rb:6:in `login'
  [1m[36mCACHE SystemUser Load (0.0ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."user_name" = ? LIMIT ?[0m  [["user_name", "sang"], ["LIMIT", 1]]
  â†³ app/models/system_user.rb:8:in `authenticate'
Completed 200 OK in 46ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 19058)


Started GET "/api/user/balance" for ::1 at 2023-11-28 20:50:46 +0700
Processing by Api::UsersController#balance as */*
  Parameters: {"user_id"=>"7"}
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 231)


Started GET "/api/user/balance" for ::1 at 2023-11-28 20:50:59 +0700
Processing by Api::UsersController#balance as */*
  Parameters: {"user_id"=>"7"}
  [1m[36mSystemUser Load (0.7ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:31:in `balance'
  [1m[36mWallet Load (0.8ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/users_controller.rb:33:in `balance'
  [1m[36mTransaction Sum (1.7ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:8:in `balance'
  [1m[36mTransaction Sum (1.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:8:in `balance'
Completed 200 OK in 95ms (Views: 0.2ms | ActiveRecord: 5.8ms | Allocations: 29017)


Started POST "/api/deposit" for ::1 at 2023-11-28 20:51:20 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"9", "amount"=>"1000", "description"=>"Transfer from Bank account"}
Filter chain halted as :authenticate_user_from_token! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 217)


Started POST "/api/deposit" for ::1 at 2023-11-28 20:51:30 +0700
Processing by Api::WalletsController#deposit as */*
  Parameters: {"user_id"=>"9", "amount"=>"1000", "description"=>"Transfer from Bank account"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:113:in `set_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:17:in `block in deposit'
  [1m[36mTransaction Create (1.8ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 5], ["amount", 1000.0], ["description", "Transfer from Bank account"], ["message", nil], ["created_at", "2023-11-28 13:51:30.944275"], ["updated_at", "2023-11-28 13:51:30.944275"]]
  â†³ app/controllers/api/wallets_controller.rb:17:in `block in deposit'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:16:in `deposit'
Completed 201 Created in 20ms (Views: 2.2ms | ActiveRecord: 2.1ms | Allocations: 10501)


Started POST "/api/withdraw" for ::1 at 2023-11-28 20:51:47 +0700
Processing by Api::WalletsController#withdraw as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "description"=>"Withdraw in ATM"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:113:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:42:in `withdraw'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:8:in `balance'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:8:in `balance'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:49:in `block in withdraw'
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 10.0], ["description", "Withdraw in ATM"], ["message", nil], ["created_at", "2023-11-28 13:51:47.763388"], ["updated_at", "2023-11-28 13:51:47.763388"]]
  â†³ app/controllers/api/wallets_controller.rb:49:in `block in withdraw'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:48:in `withdraw'
Completed 201 Created in 19ms (Views: 0.3ms | ActiveRecord: 1.1ms | Allocations: 3821)


Started POST "/api/transfer" for ::1 at 2023-11-28 20:52:12 +0700
Processing by Api::WalletsController#transfer as */*
  Parameters: {"user_id"=>"7", "amount"=>"10", "message"=>"Happy birdth day", "target_wallet_id"=>"4"}
  [1m[36mSystemUser Load (0.1ms)[0m  [1m[34mSELECT "system_users".* FROM "system_users" WHERE "system_users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:14:in `authenticate_user_from_token!'
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "entities".* FROM "entities" WHERE "entities"."type" = ? AND "entities"."id" = ? LIMIT ?[0m  [["type", "User"], ["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:113:in `set_user'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:76:in `transfer'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:8:in `balance'
  [1m[36mTransaction Sum (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:8:in `balance'
  [1m[36mTransaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:8:in `balance'
  [1m[36mTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", 3], ["target_wallet_id", nil], ["amount", 10.0], ["description", "Transfer to wallet 4"], ["message", "Happy birdth day"], ["created_at", "2023-11-28 13:52:12.640534"], ["updated_at", "2023-11-28 13:52:12.640534"]]
  â†³ app/controllers/api/wallets_controller.rb:79:in `block in transfer'
  [1m[36mWallet Load (0.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/api/wallets_controller.rb:87:in `block in transfer'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("source_wallet_id", "target_wallet_id", "amount", "description", "message", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["source_wallet_id", nil], ["target_wallet_id", 4], ["amount", 10.0], ["description", "Transfer from wallet 3"], ["message", "Happy birdth day"], ["created_at", "2023-11-28 13:52:12.644314"], ["updated_at", "2023-11-28 13:52:12.644314"]]
  â†³ app/controllers/api/wallets_controller.rb:88:in `block in transfer'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:8:in `balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:8:in `balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/api/wallets_controller.rb:76:in `transfer'
Completed 200 OK in 16ms (Views: 0.4ms | ActiveRecord: 2.0ms | Allocations: 6783)


